{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pooja/MazarsRepo/src/pages/TL/Proposal/InprogressProposal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Layout from \"../../../components/Layout/Layout\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { Card, CardHeader, CardBody, CardTitle, Row, Col } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport \"antd/dist/antd.css\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport TeamFilter from \"../../../components/Search-Filter/tlFilter\";\nimport ChatHistory from \"./ChatHistory\";\nimport DiscardReport from \"../AssignmentTab/DiscardReport\";\n\nfunction InprogressProposal() {\n  _s();\n\n  const userid = window.localStorage.getItem(\"tlkey\");\n  const [records, setRecords] = useState([]);\n  const [proposal, setProposal] = useState([]);\n  const [count, setCount] = useState(\"\");\n  const [id, setId] = useState(null);\n  const [addPaymentModal, setPaymentModal] = useState(false);\n\n  const chatHandler = key => {\n    console.log(key);\n    setPaymentModal(!addPaymentModal);\n    setId(key.assign_no);\n  };\n\n  const [assignNo, setAssignNo] = useState('');\n  const [ViewDiscussion, setViewDiscussion] = useState(false);\n\n  const ViewDiscussionToggel = key => {\n    setViewDiscussion(!ViewDiscussion);\n    setAssignNo(key);\n  };\n\n  useEffect(() => {\n    getProposalList();\n  }, []);\n\n  const getProposalList = () => {\n    axios.get(`${baseUrl}/tl/getProposalTl?id=${JSON.parse(userid)}&status=1`).then(res => {\n      console.log(res);\n\n      if (res.data.code === 1) {\n        setProposal(res.data.result);\n        setCount(res.data.result.length);\n        setRecords(res.data.result.length);\n      }\n    });\n  };\n\n  const columns = [{\n    text: \"S.No\",\n    dataField: \"\",\n    formatter: (cellContent, row, rowIndex) => {\n      return rowIndex + 1;\n    },\n    style: {\n      fontSize: \"11px\"\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"11px\",\n        width: \"60px\"\n      };\n    }\n  }, {\n    dataField: \"query_date\",\n    text: \"Date\",\n    sort: true,\n    style: {\n      fontSize: \"11px\"\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"11px\"\n      };\n    },\n    formatter: function dateFormat(cell, row) {\n      console.log(\"dt\", row.query_date);\n      var oldDate = row.query_date;\n\n      if (oldDate == null) {\n        return null;\n      }\n\n      return oldDate.slice(0, 10).toString().split(\"-\").reverse().join(\"-\");\n    }\n  }, {\n    text: \"Query No\",\n    dataField: \"assign_no\",\n    style: {\n      fontSize: \"11px\"\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"11px\"\n      };\n    },\n    formatter: function nameFormatter(cell, row) {\n      console.log(row);\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: {\n            pathname: `/teamleader/queries/${row.id}`,\n            routes: \"proposal\"\n          },\n          children: row.assign_no\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }, this)\n      }, void 0, false);\n    }\n  }, {\n    text: \"Category\",\n    dataField: \"parent_id\",\n    sort: true,\n    style: {\n      fontSize: \"11px\"\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"11px\"\n      };\n    }\n  }, {\n    text: \"Sub Category\",\n    dataField: \"cat_name\",\n    sort: true,\n    style: {\n      fontSize: \"11px\"\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"11px\"\n      };\n    }\n  }, {\n    text: \"Date of Proposal\",\n    dataField: \"DateofProposal\",\n    sort: true,\n    style: {\n      fontSize: \"11px\"\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"11px\"\n      };\n    },\n    formatter: function dateFormat(cell, row) {\n      console.log(\"dt\", row.DateofProposal);\n      var oldDate = row.DateofProposal;\n\n      if (oldDate == null) {\n        return null;\n      }\n\n      return oldDate.toString().split(\"-\").reverse().join(\"-\");\n    }\n  }, {\n    text: \"Date of acceptance / decline of Proposal\",\n    dataField: \"cust_accept_date\",\n    sort: true,\n    style: {\n      fontSize: \"11px\"\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"11px\"\n      };\n    },\n    formatter: function dateFormat(cell, row) {\n      console.log(\"dt\", row.cust_accept_date);\n      var oldDate = row.cust_accept_date;\n\n      if (oldDate == null) {\n        return null;\n      }\n\n      return oldDate.slice(0, 10).toString().split(\"-\").reverse().join(\"-\");\n    }\n  }, {\n    text: \"Status\",\n    style: {\n      fontSize: \"11px\"\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"11px\"\n      };\n    },\n    formatter: function nameFormatter(cell, row) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [row.status, \"/\", row.status == \"Inprogress\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"inprogress\",\n            children: row.statusdescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 37\n          }, this) : row.status == \"Customer Declined; Proposal\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"declined\",\n            children: row.statusdescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 41\n          }, this) : row.status == \"Accepted; Proposal\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"completed\",\n            children: row.statusdescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 45\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }, this)\n      }, void 0, false);\n    }\n  }, {\n    dataField: \"ProposedAmount\",\n    text: \"Proposed Amount\",\n    sort: true,\n    style: {\n      fontSize: \"11px\"\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"11px\"\n      };\n    }\n  }, {\n    dataField: \"accepted_amount\",\n    text: \"Accepted Amount \",\n    sort: true,\n    style: {\n      fontSize: \"11px\",\n      color: \"#21a3ce\"\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"11px\",\n        color: \"#21a3ce\"\n      };\n    }\n  }, {\n    text: \"Action\",\n    dataField: \"\",\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\",\n        width: \"110px\"\n      };\n    },\n    formatter: function (cell, row) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: row.status_code == \"4\" ? /*#__PURE__*/_jsxDEV(Link, {\n              to: `/teamleader/edit-proposal/${row.id}`,\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-edit\",\n                style: {\n                  fontSize: \"16px\",\n                  cursor: \"pointer\",\n                  color: \"green\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 37\n            }, this) : row.status_code == \"2\" && row.work_by != \"0\" ? /*#__PURE__*/_jsxDEV(Link, {\n              to: `/teamleader/sendproposal/${row.id}`,\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fa fa-mail-forward\",\n                style: {\n                  fontSize: \"14px\",\n                  cursor: \"pointer\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 37\n            }, this) : null\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: row.status == \"Customer Declined; Proposal\" ? null : /*#__PURE__*/_jsxDEV(\"div\", {\n              title: \"Send Message\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: {\n                  pathname: `/teamleader/chatting/${row.id}`,\n                  obj: {\n                    message_type: \"2\",\n                    query_No: row.assign_no,\n                    query_id: row.id,\n                    routes: `/teamleader/proposal`\n                  }\n                },\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  class: \"fa fa-comments-o\",\n                  style: {\n                    fontSize: 16,\n                    cursor: \"pointer\",\n                    marginLeft: \"8px\",\n                    color: \"blue\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 299,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 41\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 29\n          }, this), row.status_code > \"3\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              cursor: \"pointer\",\n              marginLeft: \"8px\"\n            },\n            title: \"View Proposal\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: `${baseUrl}/customers/dounloadpdf?id=${row.id}&viewpdf=1`,\n              target: \"_blank\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fa fa-eye\",\n                style: {\n                  color: \"green\",\n                  fontSize: \"16px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 33\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 25\n        }, this)\n      }, void 0, false);\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: /*#__PURE__*/_jsxDEV(TeamFilter, {\n          setData: setProposal,\n          getData: getProposalList,\n          InprogressProposal: \"InprogressProposal\",\n          setRecords: setRecords,\n          records: records\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n        children: [/*#__PURE__*/_jsxDEV(BootstrapTable, {\n          bootstrap4: true,\n          keyField: \"id\",\n          data: proposal,\n          columns: columns,\n          rowIndex: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(ChatHistory, {\n          chatHandler: chatHandler,\n          addPaymentModal: addPaymentModal,\n          qno: id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(DiscardReport, {\n          ViewDiscussionToggel: ViewDiscussionToggel,\n          ViewDiscussion: ViewDiscussion,\n          report: assignNo,\n          getData: getProposalList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(InprogressProposal, \"0CzgXa8EHjFvjDWlUhLheOSnxFE=\");\n\n_c = InprogressProposal;\nexport default InprogressProposal;\n\nvar _c;\n\n$RefreshReg$(_c, \"InprogressProposal\");","map":{"version":3,"sources":["/home/pooja/MazarsRepo/src/pages/TL/Proposal/InprogressProposal.js"],"names":["React","useState","useEffect","Layout","axios","baseUrl","Card","CardHeader","CardBody","CardTitle","Row","Col","Link","BootstrapTable","TeamFilter","ChatHistory","DiscardReport","InprogressProposal","userid","window","localStorage","getItem","records","setRecords","proposal","setProposal","count","setCount","id","setId","addPaymentModal","setPaymentModal","chatHandler","key","console","log","assign_no","assignNo","setAssignNo","ViewDiscussion","setViewDiscussion","ViewDiscussionToggel","getProposalList","get","JSON","parse","then","res","data","code","result","length","columns","text","dataField","formatter","cellContent","row","rowIndex","style","fontSize","headerStyle","width","sort","dateFormat","cell","query_date","oldDate","slice","toString","split","reverse","join","nameFormatter","pathname","routes","DateofProposal","cust_accept_date","status","statusdescription","color","display","justifyContent","status_code","cursor","work_by","obj","message_type","query_No","query_id","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Layout from \"../../../components/Layout/Layout\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { Card, CardHeader, CardBody, CardTitle, Row, Col } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport \"antd/dist/antd.css\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport TeamFilter from \"../../../components/Search-Filter/tlFilter\";\nimport ChatHistory from \"./ChatHistory\";\nimport DiscardReport from \"../AssignmentTab/DiscardReport\";\n\n\n\nfunction InprogressProposal() {\n    const userid = window.localStorage.getItem(\"tlkey\");\n    const [records, setRecords] = useState([]);\n    const [proposal, setProposal] = useState([]);\n    const [count, setCount] = useState(\"\");\n    const [id, setId] = useState(null);\n\n    const [addPaymentModal, setPaymentModal] = useState(false);\n    const chatHandler = (key) => {\n        console.log(key);\n        setPaymentModal(!addPaymentModal);\n        setId(key.assign_no);\n    };\n\n    const [assignNo, setAssignNo] = useState('');\n    const [ViewDiscussion, setViewDiscussion] = useState(false);\n    const ViewDiscussionToggel = (key) => {\n        setViewDiscussion(!ViewDiscussion);\n        setAssignNo(key)\n    }\n\n    useEffect(() => {\n        getProposalList();\n    }, []);\n\n    const getProposalList = () => {\n        axios\n            .get(`${baseUrl}/tl/getProposalTl?id=${JSON.parse(userid)}&status=1`)\n            .then((res) => {\n                console.log(res);\n                if (res.data.code === 1) {\n                    setProposal(res.data.result);\n                    setCount(res.data.result.length);\n                    setRecords(res.data.result.length);\n\n                }\n            });\n    };\n\n    const columns = [\n        {\n            text: \"S.No\",\n            dataField: \"\",\n            formatter: (cellContent, row, rowIndex) => {\n                return rowIndex + 1;\n            },\n            style: {\n                fontSize: \"11px\",\n            },\n            headerStyle: () => {\n                return { fontSize: \"11px\", width: \"60px\" };\n            },\n        },\n        {\n            dataField: \"query_date\",\n            text: \"Date\",\n            sort: true,\n            style: {\n                fontSize: \"11px\",\n            },\n            headerStyle: () => {\n                return { fontSize: \"11px\" };\n            },\n            formatter: function dateFormat(cell, row) {\n                console.log(\"dt\", row.query_date);\n                var oldDate = row.query_date;\n                if (oldDate == null) {\n                    return null;\n                }\n                return oldDate.slice(0, 10).toString().split(\"-\").reverse().join(\"-\");\n            },\n        },\n        {\n            text: \"Query No\",\n            dataField: \"assign_no\",\n            style: {\n                fontSize: \"11px\",\n            },\n            headerStyle: () => {\n                return { fontSize: \"11px\" };\n            },\n            formatter: function nameFormatter(cell, row) {\n                console.log(row);\n                return (\n                    <>\n\n                        <Link\n                            to={{\n                                pathname: `/teamleader/queries/${row.id}`,\n                                routes: \"proposal\",\n                            }}\n                        >\n                            {row.assign_no}\n                        </Link>\n                    </>\n                );\n            },\n        },\n        {\n            text: \"Category\",\n            dataField: \"parent_id\",\n            sort: true,\n            style: {\n                fontSize: \"11px\",\n            },\n            headerStyle: () => {\n                return { fontSize: \"11px\" };\n            },\n        },\n        {\n            text: \"Sub Category\",\n            dataField: \"cat_name\",\n            sort: true,\n            style: {\n                fontSize: \"11px\",\n            },\n            headerStyle: () => {\n                return { fontSize: \"11px\" };\n            },\n        },\n        {\n            text: \"Date of Proposal\",\n            dataField: \"DateofProposal\",\n            sort: true,\n            style: {\n                fontSize: \"11px\",\n            },\n            headerStyle: () => {\n                return { fontSize: \"11px\" };\n            },\n            formatter: function dateFormat(cell, row) {\n                console.log(\"dt\", row.DateofProposal);\n                var oldDate = row.DateofProposal;\n                if (oldDate == null) {\n                    return null;\n                }\n                return oldDate.toString().split(\"-\").reverse().join(\"-\");\n            },\n        },\n        {\n            text: \"Date of acceptance / decline of Proposal\",\n            dataField: \"cust_accept_date\",\n            sort: true,\n            style: {\n                fontSize: \"11px\",\n            },\n            headerStyle: () => {\n                return { fontSize: \"11px\" };\n            },\n            formatter: function dateFormat(cell, row) {\n                console.log(\"dt\", row.cust_accept_date);\n                var oldDate = row.cust_accept_date;\n                if (oldDate == null) {\n                    return null;\n                }\n                return oldDate.slice(0, 10).toString().split(\"-\").reverse().join(\"-\");\n            },\n        },\n        {\n            text: \"Status\",\n            style: {\n                fontSize: \"11px\",\n            },\n            headerStyle: () => {\n                return { fontSize: \"11px\" };\n            },\n            formatter: function nameFormatter(cell, row) {\n                return (\n                    <>\n                        <div>\n                            {row.status}/\n                            {\n                                row.status == \"Inprogress\" ?\n                                    <p className=\"inprogress\">\n\n                                        {row.statusdescription}\n                                    </p>\n                                    :\n                                    row.status == \"Customer Declined; Proposal\" ?\n                                        <p className=\"declined\">\n\n                                            {row.statusdescription}\n                                        </p> :\n                                        row.status == \"Accepted; Proposal\" ?\n                                            <p className=\"completed\">\n                                                {row.statusdescription}\n                                            </p> :\n                                            null\n                            }\n\n\n                        </div>\n                    </>\n                );\n            },\n        },\n        {\n            dataField: \"ProposedAmount\",\n            text: \"Proposed Amount\",\n            sort: true,\n            style: {\n                fontSize: \"11px\",\n            },\n            headerStyle: () => {\n                return { fontSize: \"11px\" };\n            },\n        },\n        {\n            dataField: \"accepted_amount\",\n            text: \"Accepted Amount \",\n            sort: true,\n            style: {\n                fontSize: \"11px\",\n                color: \"#21a3ce\",\n            },\n            headerStyle: () => {\n                return { fontSize: \"11px\", color: \"#21a3ce\" };\n            },\n        },\n        {\n            text: \"Action\",\n            dataField: \"\",\n            headerStyle: () => {\n                return { fontSize: \"12px\", width: \"110px\" };\n            },\n            formatter: function (cell, row) {\n                return (\n                    <>\n                        <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\n                            <div>\n                                {row.status_code == \"4\" ? (\n                                    <Link to={`/teamleader/edit-proposal/${row.id}`}>\n                                        <i\n                                            className=\"fa fa-edit\"\n                                            style={{\n                                                fontSize: \"16px\",\n                                                cursor: \"pointer\",\n                                                color: \"green\",\n                                            }}\n                                        ></i>\n                                    </Link>\n                                ) : row.status_code == \"2\" &&  row.work_by != \"0\" ? (\n                                    <Link to={`/teamleader/sendproposal/${row.id}`}>\n                                        <i\n                                            class=\"fa fa-mail-forward\"\n                                            style={{\n                                                fontSize: \"14px\",\n                                                cursor: \"pointer\",\n                                            }}\n                                        ></i>\n                                    </Link>\n                                ) : null}\n                            </div>\n\n                            {/* <div style={{ cursor: \"pointer\", marginLeft: \"8px\" }} title=\"View Proposal\">\n                                <a\n                                    href={`${baseUrl}/customers/dounloadpdf?id=${row.id}&viewpdf=1`}\n                                    target=\"_blank\"\n                                >\n                                    <i\n                                        class=\"fa fa-eye\"\n                                        style={{ color: \"green\", fontSize: \"16px\" }}\n                                    />\n                                </a>\n                            </div> */}\n\n\n                            <div>\n                                {\n                                    row.status == \"Customer Declined; Proposal\" ?\n                                        null\n                                        :\n                                        <div title=\"Send Message\">\n                                            <Link\n                                                to={{\n                                                    pathname: `/teamleader/chatting/${row.id}`,\n                                                    obj: {\n                                                        message_type: \"2\",\n                                                        query_No: row.assign_no,\n                                                        query_id: row.id,\n                                                        routes: `/teamleader/proposal`\n                                                    }\n                                                }}\n                                            >\n                                                <i\n                                                    class=\"fa fa-comments-o\"\n                                                    style={{\n                                                        fontSize: 16,\n                                                        cursor: \"pointer\",\n                                                        marginLeft: \"8px\",\n                                                        color: \"blue\"\n                                                    }}\n                                                ></i>\n                                            </Link>\n                                        </div>\n                                }\n                            </div>\n\n                            {row.status_code > \"3\" ?\n                                <div style={{ cursor: \"pointer\", marginLeft: \"8px\" }} title=\"View Proposal\">\n\n                                    <a\n                                        href={`${baseUrl}/customers/dounloadpdf?id=${row.id}&viewpdf=1`}\n                                        target=\"_blank\"\n                                    >\n                                        <i\n                                            class=\"fa fa-eye\"\n                                            style={{ color: \"green\", fontSize: \"16px\" }}\n                                        />\n                                    </a>\n                                </div>\n                                :\n                                null\n                            }\n                        </div>\n                    </>\n                );\n            },\n        },\n    ];\n\n    return (\n        <>\n            <Card>\n                <CardHeader>\n                    <TeamFilter\n                        setData={setProposal}\n                        getData={getProposalList}\n                        InprogressProposal=\"InprogressProposal\"\n                        setRecords={setRecords}\n                        records={records}\n                    />\n                </CardHeader>\n                <CardBody>\n                    <BootstrapTable\n                        bootstrap4\n                        keyField=\"id\"\n                        data={proposal}\n                        columns={columns}\n                        rowIndex\n                    />\n\n                    <ChatHistory\n                        chatHandler={chatHandler}\n                        addPaymentModal={addPaymentModal}\n                        qno={id}\n                    />\n\n                    <DiscardReport\n                        ViewDiscussionToggel={ViewDiscussionToggel}\n                        ViewDiscussion={ViewDiscussion}\n                        report={assignNo}\n                        getData={getProposalList}\n                    />\n                </CardBody>\n            </Card>\n        </>\n    );\n}\n\nexport default InprogressProposal;\n\n"]},"metadata":{},"sourceType":"module"}
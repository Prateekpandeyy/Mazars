{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pooja/MazarsRepo/src/components/PendingForProposals/PendingForProposals.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../config/config\";\nimport { Link } from \"react-router-dom\";\nimport { Card, CardHeader, CardBody, CardTitle, Row, Col, Table, Modal, ModalHeader, ModalBody, ModalFooter, Button } from \"reactstrap\";\nimport { useForm } from \"react-hook-form\";\nimport \"antd/dist/antd.css\";\nimport { Select } from \"antd\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport AdminFilter from \"../../components/Search-Filter/AdminFilter\";\nimport Records from \"../../components/Records/Records\";\n\nfunction PendingForProposals({\n  CountPendingProposal\n}) {\n  _s();\n\n  const {\n    handleSubmit,\n    register,\n    errors,\n    reset\n  } = useForm();\n  const {\n    Option,\n    OptGroup\n  } = Select;\n  const [nonpendingData, setNonPendingData] = useState([]);\n  const [selectedData, setSelectedData] = useState([]);\n  const [records, setRecords] = useState([]);\n  const [history, setHistory] = useState([]);\n  const [modal, setModal] = useState(false);\n\n  const toggle = key => {\n    console.log(\"key\", key);\n    setModal(!modal);\n    fetch(`${baseUrl}/customers/getQueryHistory?q_id=${key}`, {\n      method: \"GET\",\n      headers: new Headers({\n        Accept: \"application/vnd.github.cloak-preview\"\n      })\n    }).then(res => res.json()).then(response => {\n      console.log(response);\n      setHistory(response.result);\n    }).catch(error => console.log(error));\n  };\n\n  useEffect(() => {\n    getPendingForProposals();\n  }, []);\n\n  const getPendingForProposals = () => {\n    axios.get(`${baseUrl}/admin/pendingProposal`).then(res => {\n      console.log(res);\n\n      if (res.data.code === 1) {\n        setNonPendingData(res.data.result);\n        setRecords(res.data.result.length); // CountPendingProposal(res.data.result.length);\n      }\n    });\n  };\n\n  const columns = [{\n    dataField: \"\",\n    text: \"S.No\",\n    formatter: (cellContent, row, rowIndex) => {\n      return rowIndex + 1;\n    }\n  }, {\n    dataField: \"created\",\n    text: \"Date\",\n    sort: true,\n    formatter: function dateFormat(cell, row) {\n      console.log(\"dt\", row.created);\n      var oldDate = row.created;\n\n      if (oldDate == null) {\n        return null;\n      }\n\n      return oldDate.toString().split(\"-\").reverse().join(\"-\");\n    }\n  }, {\n    dataField: \"assign_no\",\n    text: \"Query No\",\n    formatter: function nameFormatter(cell, row) {\n      console.log(row);\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Link // to={`/admin/queries/${row.id}`}\n        , {\n          to: {\n            pathname: `/admin/queries/${row.id}`,\n            index: 2,\n            routes: \"queriestab\"\n          },\n          children: row.assign_no\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)\n      }, void 0, false);\n    }\n  }, {\n    dataField: \"parent_id\",\n    text: \"Category\",\n    sort: true\n  }, {\n    dataField: \"cat_name\",\n    text: \"Sub Category\",\n    sort: true\n  }, {\n    text: \"Customer Name\",\n    dataField: \"name\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    }\n  }, {\n    text: \"Status\",\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function nameFormatter(cell, row) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [row.status, \"/\", row.status == \"Inprogress Query\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"inprogress\",\n            children: row.statusdescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 19\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this)\n      }, void 0, false);\n    }\n  }, {\n    dataField: \"tname\",\n    text: \"TL name\",\n    sort: true\n  }, {\n    text: \"History\",\n    dataField: \"\",\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function (cell, row) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          class: \"btn btn-info btn-sm\",\n          onClick: () => toggle(row.id),\n          children: \"History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }, this)\n      }, void 0, false);\n    }\n  }]; //change date format\n\n  function ChangeFormateDate(oldDate) {\n    console.log(\"date\", oldDate);\n\n    if (oldDate == null) {\n      return null;\n    }\n\n    return oldDate.toString().split(\"-\").reverse().join(\"-\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: /*#__PURE__*/_jsxDEV(AdminFilter, {\n          setData: setNonPendingData,\n          getData: getPendingForProposals,\n          pendingForProposal: \"pendingForProposal\",\n          setRecords: setRecords,\n          records: records\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n        children: [/*#__PURE__*/_jsxDEV(Records, {\n          records: records\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(BootstrapTable, {\n          bootstrap4: true,\n          keyField: \"id\",\n          data: nonpendingData,\n          columns: columns,\n          wrapperClasses: \"table-responsive\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          isOpen: modal,\n          fade: false,\n          toggle: toggle,\n          children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n            toggle: toggle,\n            children: \"History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              class: \"table table-bordered\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"row\",\n                    children: \"S.No\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"row\",\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"row\",\n                    children: \"Query No\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"row\",\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    scope: \"row\",\n                    children: \"Date of Allocation\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 17\n              }, this), history.length > 0 ? history.map((p, i) => /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: i + 1\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: p.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: p.assign_no\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: p.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 237,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: ChangeFormateDate(p.date_of_allocation)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }, this)) : null]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              color: \"secondary\",\n              onClick: toggle,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(PendingForProposals, \"75sLqYspkTcPu1pwYszvBZEcF/w=\", false, function () {\n  return [useForm];\n});\n\n_c = PendingForProposals;\nexport default PendingForProposals;\n{\n  /* <td class=\"text-center\">\n                      <p style={{ color: \"green\" }}>\n                        Query accepted by {p.tname}\n                      </p>\n                    </td> */\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"PendingForProposals\");","map":{"version":3,"sources":["/home/pooja/MazarsRepo/src/components/PendingForProposals/PendingForProposals.js"],"names":["React","useState","useEffect","axios","baseUrl","Link","Card","CardHeader","CardBody","CardTitle","Row","Col","Table","Modal","ModalHeader","ModalBody","ModalFooter","Button","useForm","Select","BootstrapTable","AdminFilter","Records","PendingForProposals","CountPendingProposal","handleSubmit","register","errors","reset","Option","OptGroup","nonpendingData","setNonPendingData","selectedData","setSelectedData","records","setRecords","history","setHistory","modal","setModal","toggle","key","console","log","fetch","method","headers","Headers","Accept","then","res","json","response","result","catch","error","getPendingForProposals","get","data","code","length","columns","dataField","text","formatter","cellContent","row","rowIndex","sort","dateFormat","cell","created","oldDate","toString","split","reverse","join","nameFormatter","pathname","id","index","routes","assign_no","headerStyle","fontSize","status","statusdescription","ChangeFormateDate","map","p","i","name","date_of_allocation"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../config/config\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  CardTitle,\n  Row,\n  Col,\n  Table,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Button,\n} from \"reactstrap\";\nimport { useForm } from \"react-hook-form\";\nimport \"antd/dist/antd.css\";\nimport { Select } from \"antd\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport AdminFilter from \"../../components/Search-Filter/AdminFilter\";\nimport Records from \"../../components/Records/Records\";\n\n\nfunction PendingForProposals({ CountPendingProposal }) {\n  const { handleSubmit, register, errors, reset } = useForm();\n  const { Option, OptGroup } = Select;\n\n  const [nonpendingData, setNonPendingData] = useState([]);\n  const [selectedData, setSelectedData] = useState([]);\n  const [records, setRecords] = useState([]);\n\n  const [history, setHistory] = useState([]);\n  const [modal, setModal] = useState(false);\n\n  const toggle = (key) => {\n    console.log(\"key\", key);\n    setModal(!modal);\n\n    fetch(`${baseUrl}/customers/getQueryHistory?q_id=${key}`, {\n      method: \"GET\",\n      headers: new Headers({\n        Accept: \"application/vnd.github.cloak-preview\",\n      }),\n    })\n      .then((res) => res.json())\n      .then((response) => {\n        console.log(response);\n        setHistory(response.result);\n      })\n      .catch((error) => console.log(error));\n  };\n\n  useEffect(() => {\n    getPendingForProposals();\n  }, []);\n\n  const getPendingForProposals = () => {\n    axios.get(`${baseUrl}/admin/pendingProposal`).then((res) => {\n      console.log(res);\n      if (res.data.code === 1) {\n        setNonPendingData(res.data.result);\n        setRecords(res.data.result.length);\n        // CountPendingProposal(res.data.result.length);\n      }\n    });\n  };\n\n\n\n\n  const columns = [\n    {\n      dataField: \"\",\n      text: \"S.No\",\n      formatter: (cellContent, row, rowIndex) => {\n        return rowIndex + 1;\n      },\n    },\n    {\n      dataField: \"created\",\n      text: \"Date\",\n      sort: true,\n\n      formatter: function dateFormat(cell, row) {\n        console.log(\"dt\", row.created);\n        var oldDate = row.created;\n        if (oldDate == null) {\n          return null;\n        }\n        return oldDate.toString().split(\"-\").reverse().join(\"-\");\n      },\n    },\n    {\n      dataField: \"assign_no\",\n      text: \"Query No\",\n      formatter: function nameFormatter(cell, row) {\n        console.log(row);\n        return (\n          <>\n            <Link\n              // to={`/admin/queries/${row.id}`}\n              to={{\n                pathname: `/admin/queries/${row.id}`,\n                index: 2,\n                routes: \"queriestab\",\n              }}\n            >{row.assign_no}</Link>\n          </>\n        );\n      },\n    },\n    {\n      dataField: \"parent_id\",\n      text: \"Category\",\n      sort: true,\n    },\n    {\n      dataField: \"cat_name\",\n      text: \"Sub Category\",\n      sort: true,\n    },\n    {\n      text: \"Customer Name\",\n      dataField: \"name\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n    },\n    {\n      text: \"Status\",\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n      formatter: function nameFormatter(cell, row) {\n        return (\n          <>\n            <div>\n              {row.status}/\n              {\n                row.status == \"Inprogress Query\" ?\n                  <p className=\"inprogress\">\n                    {row.statusdescription}\n                  </p>\n                  :\n                  null\n              }\n            </div>\n          </>\n        );\n      },\n    },\n    {\n      dataField: \"tname\",\n      text: \"TL name\",\n      sort: true,\n    },\n    {\n      text: \"History\",\n      dataField: \"\",\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n      formatter: function (cell, row) {\n        return (\n          <>\n            <button\n              type=\"button\"\n              class=\"btn btn-info btn-sm\"\n              onClick={() => toggle(row.id)}\n            >\n              History\n            </button>\n          </>\n        );\n      },\n    },\n  ];\n\n\n\n  //change date format\n  function ChangeFormateDate(oldDate) {\n    console.log(\"date\", oldDate);\n    if (oldDate == null) {\n      return null;\n    }\n    return oldDate.toString().split(\"-\").reverse().join(\"-\");\n  }\n\n  return (\n    <>\n      <Card>\n        <CardHeader>\n          <AdminFilter\n            setData={setNonPendingData}\n            getData={getPendingForProposals}\n            pendingForProposal=\"pendingForProposal\"\n            setRecords={setRecords}\n            records={records}\n          />\n\n        </CardHeader>\n        <CardBody>\n          <Records records={records} />\n          <BootstrapTable\n            bootstrap4\n            keyField=\"id\"\n            data={nonpendingData}\n            columns={columns}\n            wrapperClasses=\"table-responsive\"\n          />\n          <Modal isOpen={modal} fade={false} toggle={toggle}>\n            <ModalHeader toggle={toggle}>History</ModalHeader>\n            <ModalBody>\n              <table class=\"table table-bordered\">\n                <thead>\n                  <tr>\n                    <th scope=\"row\">S.No</th>\n                    <th scope=\"row\">Name</th>\n                    <th scope=\"row\">Query No</th>\n                    <th scope=\"row\">Status</th>\n                    <th scope=\"row\">Date of Allocation</th>\n                  </tr>\n                </thead>\n\n                {history.length > 0\n                  ? history.map((p, i) => (\n                    <tbody>\n                      <tr>\n                        <td>{i + 1}</td>\n                        <td>{p.name}</td>\n                        <td>{p.assign_no}</td>\n                        <td>{p.status}</td>\n                        <td>{ChangeFormateDate(p.date_of_allocation)}</td>\n                      </tr>\n                    </tbody>\n                  ))\n                  : null}\n              </table>\n            </ModalBody>\n            <ModalFooter>\n              <Button color=\"secondary\" onClick={toggle}>\n                Cancel\n              </Button>\n            </ModalFooter>\n          </Modal>\n        </CardBody>\n      </Card>\n    </>\n  );\n}\n\nexport default PendingForProposals;\n{\n  /* <td class=\"text-center\">\n                      <p style={{ color: \"green\" }}>\n                        Query accepted by {p.tname}\n                      </p>\n                    </td> */\n}\n"]},"metadata":{},"sourceType":"module"}
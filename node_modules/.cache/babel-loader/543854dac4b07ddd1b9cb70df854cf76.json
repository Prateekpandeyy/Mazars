{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pooja/MazarsRepo/src/views/Login/Login.js\",\n    _s = $RefreshSig$();\n\nimport { useRef, useState, useEffect } from \"react\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from '../../components/Footer/Footer';\nimport { Button, Typography } from \"@material-ui/core\";\nimport './style.css';\nimport { Link } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../config/config\";\nimport VerifyOTP from \"./VerifyOTP\";\nimport classNames from \"classnames\";\nimport Alerts from \"../../common/Alerts\";\nimport Mandatory from \"../../components/Common/Mandatory\";\nimport { Spinner } from 'reactstrap';\nconst Schema = yup.object().shape({\n  p_email: yup.string().email(\"invalid email\").required(\"\"),\n  p_password: yup.string().required(\"\")\n});\n\nfunction LoginForm() {\n  _s();\n\n  const {\n    handleSubmit,\n    register,\n    errors\n  } = useForm({\n    resolver: yupResolver(Schema)\n  });\n  const [loading, setLoading] = useState(false);\n  const [show, setShow] = useState(false);\n  const [email, setEmail] = useState();\n  const [uid, setUid] = useState('');\n  const [time, setTime] = useState('');\n  const [load, setLoad] = useState(false);\n  const [disabled, setDisabled] = useState(false);\n  const [isPasswordShow, setPasswordShow] = useState(false);\n\n  const togglePasssword = () => {\n    setPasswordShow(!isPasswordShow);\n  };\n\n  useEffect(() => {\n    getTime();\n  }, [load]);\n\n  const getTime = () => {\n    // console.log(\"get time\")\n    if (load) {\n      var timerOn = true;\n\n      function timer(remaining) {\n        var s = remaining % 60;\n        s = s < 10 ? '0' + s : s;\n        setTime(s);\n        remaining -= 1;\n\n        if (remaining >= 0 && timerOn) {\n          setTimeout(function () {\n            timer(remaining);\n          }, 1000);\n          return;\n        }\n\n        setDisabled(true);\n        setLoad(false);\n      }\n\n      timer(60);\n    }\n  };\n\n  const onSubmit = value => {\n    setLoading(true);\n    let formData = new FormData();\n    formData.append(\"user_id\", value.p_email);\n    formData.append(\"password\", value.p_password);\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/customers/login`,\n      data: formData\n    }).then(function (response) {\n      console.log(\"res-\", response);\n\n      if (response.data.code === 1) {\n        setLoading(false);\n        Alerts.SuccessNormal(\"As per your request, OTP has been sent to your registered email address.\");\n        setShow(true);\n        setLoad(true);\n        setUid(response.data.user_id);\n      } else if (response.data.code === 0) {\n        Alerts.ErrorNormal(\"Invalid email or password.\");\n        setLoading(false);\n      }\n    }).catch(error => {\n      console.log(\"erroror - \", error);\n    });\n  };\n\n  const handleChange = e => {\n    console.log(\"val-\", e.target.value);\n    setEmail(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      noSign: \"noSign\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      style: {\n        \"textAlign\": \"center\",\n        \"margin\": \"55px 0 30px 0\"\n      },\n      children: \"Would you like to post a query\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"StartPage\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mainContent\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"signIn\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"signBtn\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"boxOverlay\",\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h4\",\n                style: {\n                  \"margin\": \"5px auto\",\n                  \"color\": \"#fff\"\n                },\n                children: \"For new customers\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  className: \"SignUpLink\",\n                  to: {\n                    pathname: \"/customer/signup\"\n                  },\n                  children: \"Sign Up\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"signUp\",\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            style: {\n              \"margin\": \"5px auto\",\n              \"color\": \"#2b345f\"\n            },\n            children: \"For existing customers\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 13\n          }, this), show ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"customForm\",\n            children: /*#__PURE__*/_jsxDEV(VerifyOTP, {\n              email: email,\n              uid: uid,\n              time: time,\n              setLoad: setLoad,\n              setDisabled: setDisabled,\n              disabled: disabled,\n              setLoading: setLoading,\n              loading: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 22\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"customForm\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSubmit(onSubmit),\n              className: \"signInForm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-label\",\n                  children: [\"Email \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"declined\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 150,\n                    columnNumber: 59\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: classNames(\"form-control\", {\n                    \"is-invalid\": errors.p_email\n                  }),\n                  name: \"p_email\",\n                  ref: register,\n                  placeholder: \"Enter Email\",\n                  onChange: e => handleChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group passForm \",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-label\",\n                  children: [\"Password \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"declined\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 62\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: isPasswordShow ? \"text\" : \"password\",\n                  className: classNames(\"form-control\", {\n                    \"is-invalid\": errors.p_password\n                  }),\n                  name: \"p_password\",\n                  placeholder: \"Enter Password\",\n                  ref: register\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: `fa ${isPasswordShow ? \"fa-eye-slash\" : \"fa-eye\"} password-icon-login`,\n                  onClick: togglePasssword\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: \"flex\",\n                  margin: \"0 0 30px 0\",\n                  justifyContent: \"flex-end\"\n                },\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: {\n                    pathname: \"/customer/forget-password\",\n                    email: `${email}`\n                  },\n                  children: \"Forgot Password\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 21\n              }, this), loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n                color: \"primary\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 25\n              }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                type: \"submit\",\n                children: \"Send OTP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Mandatory, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(LoginForm, \"l3kUy1GGdHMbpxF8W+odXf8htq4=\", false, function () {\n  return [useForm];\n});\n\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["/home/pooja/MazarsRepo/src/views/Login/Login.js"],"names":["useRef","useState","useEffect","Header","Footer","Button","Typography","Link","useForm","yupResolver","yup","axios","baseUrl","VerifyOTP","classNames","Alerts","Mandatory","Spinner","Schema","object","shape","p_email","string","email","required","p_password","LoginForm","handleSubmit","register","errors","resolver","loading","setLoading","show","setShow","setEmail","uid","setUid","time","setTime","load","setLoad","disabled","setDisabled","isPasswordShow","setPasswordShow","togglePasssword","getTime","timerOn","timer","remaining","s","setTimeout","onSubmit","value","formData","FormData","append","method","url","data","then","response","console","log","code","SuccessNormal","user_id","ErrorNormal","catch","error","handleChange","e","target","pathname","display","margin","justifyContent"],"mappings":";;;;;;AAAA,SAASA,MAAT,EAAiBC,QAAjB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,SAASC,MAAT,EAAiBC,UAAjB,QAAmC,mBAAnC;AACA,OAAO,aAAP;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,SAAP,MAAsB,mCAAtB;AACA,SAASC,OAAT,QAAwB,YAAxB;AAEA,MAAMC,MAAM,GAAGR,GAAG,CAACS,MAAJ,GAAaC,KAAb,CAAmB;AAChCC,EAAAA,OAAO,EAAEX,GAAG,CAACY,MAAJ,GAAaC,KAAb,CAAmB,eAAnB,EAAoCC,QAApC,CAA6C,EAA7C,CADuB;AAEhCC,EAAAA,UAAU,EAAEf,GAAG,CAACY,MAAJ,GAAaE,QAAb,CAAsB,EAAtB;AAFoB,CAAnB,CAAf;;AAMA,SAASE,SAAT,GAAqB;AAAA;;AACnB,QAAM;AAAEC,IAAAA,YAAF;AAAgBC,IAAAA,QAAhB;AAA0BC,IAAAA;AAA1B,MAAqCrB,OAAO,CAAC;AACjDsB,IAAAA,QAAQ,EAAErB,WAAW,CAACS,MAAD;AAD4B,GAAD,CAAlD;AAIA,QAAM,CAACa,OAAD,EAAUC,UAAV,IAAwB/B,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACgC,IAAD,EAAOC,OAAP,IAAkBjC,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACsB,KAAD,EAAQY,QAAR,IAAoBlC,QAAQ,EAAlC;AACA,QAAM,CAACmC,GAAD,EAAMC,MAAN,IAAgBpC,QAAQ,CAAC,EAAD,CAA9B;AACA,QAAM,CAACqC,IAAD,EAAOC,OAAP,IAAkBtC,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACuC,IAAD,EAAOC,OAAP,IAAkBxC,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACyC,QAAD,EAAWC,WAAX,IAA0B1C,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAAC2C,cAAD,EAAiBC,eAAjB,IAAoC5C,QAAQ,CAAC,KAAD,CAAlD;;AACA,QAAM6C,eAAe,GAAG,MAAM;AAC5BD,IAAAA,eAAe,CAAC,CAACD,cAAF,CAAf;AACD,GAFD;;AAIA1C,EAAAA,SAAS,CAAC,MAAM;AACd6C,IAAAA,OAAO;AACR,GAFQ,EAEN,CAACP,IAAD,CAFM,CAAT;;AAKA,QAAMO,OAAO,GAAG,MAAM;AACpB;AACA,QAAIP,IAAJ,EAAU;AACR,UAAIQ,OAAO,GAAG,IAAd;;AACA,eAASC,KAAT,CAAeC,SAAf,EAA0B;AACxB,YAAIC,CAAC,GAAGD,SAAS,GAAG,EAApB;AACAC,QAAAA,CAAC,GAAGA,CAAC,GAAG,EAAJ,GAAS,MAAMA,CAAf,GAAmBA,CAAvB;AACAZ,QAAAA,OAAO,CAACY,CAAD,CAAP;AACAD,QAAAA,SAAS,IAAI,CAAb;;AACA,YAAIA,SAAS,IAAI,CAAb,IAAkBF,OAAtB,EAA+B;AAC7BI,UAAAA,UAAU,CAAC,YAAY;AACrBH,YAAAA,KAAK,CAACC,SAAD,CAAL;AACD,WAFS,EAEP,IAFO,CAAV;AAGA;AACD;;AACDP,QAAAA,WAAW,CAAC,IAAD,CAAX;AACAF,QAAAA,OAAO,CAAC,KAAD,CAAP;AACD;;AACDQ,MAAAA,KAAK,CAAC,EAAD,CAAL;AACD;AAEF,GArBD;;AAuBA,QAAMI,QAAQ,GAAIC,KAAD,IAAW;AAE1BtB,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAIuB,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA2BH,KAAK,CAACjC,OAAjC;AACAkC,IAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BH,KAAK,CAAC7B,UAAlC;AAEAd,IAAAA,KAAK,CAAC;AACJ+C,MAAAA,MAAM,EAAE,MADJ;AAEJC,MAAAA,GAAG,EAAG,GAAE/C,OAAQ,kBAFZ;AAGJgD,MAAAA,IAAI,EAAEL;AAHF,KAAD,CAAL,CAKGM,IALH,CAKQ,UAAUC,QAAV,EAAoB;AACxBC,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,QAApB;;AACA,UAAIA,QAAQ,CAACF,IAAT,CAAcK,IAAd,KAAuB,CAA3B,EAA8B;AAC5BjC,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAjB,QAAAA,MAAM,CAACmD,aAAP,CAAqB,0EAArB;AACAhC,QAAAA,OAAO,CAAC,IAAD,CAAP;AACAO,QAAAA,OAAO,CAAC,IAAD,CAAP;AACAJ,QAAAA,MAAM,CAACyB,QAAQ,CAACF,IAAT,CAAcO,OAAf,CAAN;AACD,OAND,MAMO,IAAIL,QAAQ,CAACF,IAAT,CAAcK,IAAd,KAAuB,CAA3B,EAA8B;AACnClD,QAAAA,MAAM,CAACqD,WAAP,CAAmB,4BAAnB;AACApC,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,KAjBH,EAkBGqC,KAlBH,CAkBUC,KAAD,IAAW;AAChBP,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BM,KAA1B;AACD,KApBH;AAqBD,GA5BD;;AA+BA,QAAMC,YAAY,GAAIC,CAAD,IAAO;AAC1BT,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBQ,CAAC,CAACC,MAAF,CAASnB,KAA7B;AACAnB,IAAAA,QAAQ,CAACqC,CAAC,CAACC,MAAF,CAASnB,KAAV,CAAR;AACD,GAHD;;AAMA,sBACE;AAAA,4BACE,QAAC,MAAD;AAAQ,MAAA,MAAM,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAI,MAAA,KAAK,EAAE;AAAE,qBAAa,QAAf;AAAyB,kBAAU;AAAnC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAOE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA,gCAEE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,SAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA,sCACE,QAAC,UAAD;AAAY,gBAAA,OAAO,EAAC,IAApB;AAAyB,gBAAA,KAAK,EAAE;AAAE,4BAAU,UAAZ;AAAwB,2BAAS;AAAjC,iBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AAAQ,gBAAA,SAAS,EAAC,iBAAlB;AAAA,uCACE,QAAC,IAAD;AAAM,kBAAA,SAAS,EAAC,YAAhB;AACE,kBAAA,EAAE,EAAE;AACFoB,oBAAAA,QAAQ,EAAE;AADR,mBADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAFF,eAoBE;AAAK,UAAA,SAAS,EAAC,QAAf;AAAA,kCACE,QAAC,UAAD;AAAY,YAAA,OAAO,EAAC,IAApB;AAAyB,YAAA,KAAK,EAAE;AAAE,wBAAU,UAAZ;AAAwB,uBAAS;AAAjC,aAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,EAKIzC,IAAI,gBAAG;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,mCAEL,QAAC,SAAD;AAAW,cAAA,KAAK,EAAEV,KAAlB;AAAyB,cAAA,GAAG,EAAEa,GAA9B;AAAmC,cAAA,IAAI,EAAEE,IAAzC;AAA+C,cAAA,OAAO,EAAEG,OAAxD;AACE,cAAA,WAAW,EAAEE,WADf;AAC4B,cAAA,QAAQ,EAAED,QADtC;AACgD,cAAA,UAAU,EAAEV,UAD5D;AAEE,cAAA,OAAO,EAAED;AAFX;AAAA;AAAA;AAAA;AAAA;AAFK;AAAA;AAAA;AAAA;AAAA,kBAAH,gBAOF;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,mCACE;AAAM,cAAA,QAAQ,EAAEJ,YAAY,CAAC0B,QAAD,CAA5B;AAAwC,cAAA,SAAS,EAAC,YAAlD;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,YAAf;AAAA,wCACE;AAAO,kBAAA,SAAS,EAAC,YAAjB;AAAA,oDAAoC;AAAM,oBAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAApC;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AACE,kBAAA,IAAI,EAAC,MADP;AAEE,kBAAA,SAAS,EAAEvC,UAAU,CAAC,cAAD,EAAiB;AACpC,kCAAce,MAAM,CAACR;AADe,mBAAjB,CAFvB;AAKE,kBAAA,IAAI,EAAC,SALP;AAME,kBAAA,GAAG,EAAEO,QANP;AAOE,kBAAA,WAAW,EAAC,aAPd;AAQE,kBAAA,QAAQ,EAAG4C,CAAD,IAAOD,YAAY,CAACC,CAAD;AAR/B;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAeE;AAAK,gBAAA,SAAS,EAAC,sBAAf;AAAA,wCACE;AAAO,kBAAA,SAAS,EAAC,YAAjB;AAAA,uDAAuC;AAAM,oBAAA,SAAS,EAAC,UAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAvC;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AACE,kBAAA,IAAI,EAAE5B,cAAc,GAAG,MAAH,GAAY,UADlC;AAEE,kBAAA,SAAS,EAAE9B,UAAU,CAAC,cAAD,EAAiB;AACpC,kCAAce,MAAM,CAACJ;AADe,mBAAjB,CAFvB;AAKE,kBAAA,IAAI,EAAC,YALP;AAME,kBAAA,WAAW,EAAC,gBANd;AAOE,kBAAA,GAAG,EAAEG;AAPP;AAAA;AAAA;AAAA;AAAA,wBAFF,eAWE;AACE,kBAAA,SAAS,EAAG,MAAKgB,cAAc,GAAG,cAAH,GAAoB,QAAS,sBAD9D;AAEE,kBAAA,OAAO,EAAEE;AAFX;AAAA;AAAA;AAAA;AAAA,wBAXF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAfF,eAgCE;AAAK,gBAAA,KAAK,EAAE;AAAE6B,kBAAAA,OAAO,EAAE,MAAX;AAAmBC,kBAAAA,MAAM,EAAE,YAA3B;AAAyCC,kBAAAA,cAAc,EAAE;AAAzD,iBAAZ;AAAA,uCACE,QAAC,IAAD;AACE,kBAAA,EAAE,EAAE;AACFH,oBAAAA,QAAQ,EAAE,2BADR;AAEFnD,oBAAAA,KAAK,EAAG,GAAEA,KAAM;AAFd,mBADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAhCF,EA4CIQ,OAAO,gBACL,QAAC,OAAD;AAAS,gBAAA,KAAK,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,sBADK,gBAGL;AAAQ,gBAAA,SAAS,EAAC,iBAAlB;AAAoC,gBAAA,IAAI,EAAC,QAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBA/CN;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAZN,eAoEE,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA,kBApEF;AAAA;AAAA;AAAA;AAAA;AAAA,gBApBF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAPF,eAuGE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,YAvGF;AAAA,kBADF;AA2GD;;GA7LQL,S;UACoClB,O;;;KADpCkB,S;AA+LT,eAAeA,SAAf","sourcesContent":["import { useRef, useState, useEffect } from \"react\";\nimport Header from \"../../components/Header/Header\";\nimport Footer from '../../components/Footer/Footer';\nimport { Button, Typography } from \"@material-ui/core\";\nimport './style.css';\nimport { Link } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../config/config\";\nimport VerifyOTP from \"./VerifyOTP\";\nimport classNames from \"classnames\";\nimport Alerts from \"../../common/Alerts\";\nimport Mandatory from \"../../components/Common/Mandatory\";\nimport { Spinner } from 'reactstrap';\n\nconst Schema = yup.object().shape({\n  p_email: yup.string().email(\"invalid email\").required(\"\"),\n  p_password: yup.string().required(\"\"),\n});\n\n\nfunction LoginForm() {\n  const { handleSubmit, register, errors } = useForm({\n    resolver: yupResolver(Schema),\n  });\n\n  const [loading, setLoading] = useState(false);\n  const [show, setShow] = useState(false);\n  const [email, setEmail] = useState();\n  const [uid, setUid] = useState('')\n  const [time, setTime] = useState('');\n  const [load, setLoad] = useState(false);\n  const [disabled, setDisabled] = useState(false)\n  const [isPasswordShow, setPasswordShow] = useState(false);\n  const togglePasssword = () => {\n    setPasswordShow(!isPasswordShow)\n  };\n\n  useEffect(() => {\n    getTime()\n  }, [load]);\n\n\n  const getTime = () => {\n    // console.log(\"get time\")\n    if (load) {\n      var timerOn = true;\n      function timer(remaining) {\n        var s = remaining % 60;\n        s = s < 10 ? '0' + s : s;\n        setTime(s)\n        remaining -= 1;\n        if (remaining >= 0 && timerOn) {\n          setTimeout(function () {\n            timer(remaining);\n          }, 1000);\n          return;\n        }\n        setDisabled(true)\n        setLoad(false)\n      }\n      timer(60);\n    }\n\n  }\n\n  const onSubmit = (value) => {\n\n    setLoading(true)\n    let formData = new FormData();\n    formData.append(\"user_id\", value.p_email);\n    formData.append(\"password\", value.p_password);\n\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/customers/login`,\n      data: formData,\n    })\n      .then(function (response) {\n        console.log(\"res-\", response);\n        if (response.data.code === 1) {\n          setLoading(false)\n          Alerts.SuccessNormal(\"As per your request, OTP has been sent to your registered email address.\")\n          setShow(true)\n          setLoad(true)\n          setUid(response.data.user_id)\n        } else if (response.data.code === 0) {\n          Alerts.ErrorNormal(\"Invalid email or password.\")\n          setLoading(false)\n        }\n      })\n      .catch((error) => {\n        console.log(\"erroror - \", error);\n      });\n  };\n\n\n  const handleChange = (e) => {\n    console.log(\"val-\", e.target.value);\n    setEmail(e.target.value);\n  };\n\n\n  return (\n    <>\n      <Header noSign=\"noSign\" />\n      <h1 style={{ \"textAlign\": \"center\", \"margin\": \"55px 0 30px 0\" }}>\n        Would you like to post a query\n      </h1>\n\n\n      <div className=\"StartPage\">\n        <div className=\"mainContent\">\n\n          <div className=\"signIn\">\n            <div className=\"signBtn\">\n              <div className=\"boxOverlay\">\n                <Typography variant=\"h4\" style={{ \"margin\": \"5px auto\", \"color\": \"#fff\" }}>\n                  For new customers\n                </Typography>\n                <button className=\"btn btn-success\">\n                  <Link className=\"SignUpLink\"\n                    to={{\n                      pathname: \"/customer/signup\",\n                    }}\n                  >\n                    Sign Up\n                  </Link>\n                </button>\n              </div>\n            </div>\n          </div>\n          <div className=\"signUp\">\n            <Typography variant=\"h4\" style={{ \"margin\": \"5px auto\", \"color\": \"#2b345f\" }}>\n              For existing customers\n            </Typography>\n            {\n              show ? <div className=\"customForm\">\n\n                <VerifyOTP email={email} uid={uid} time={time} setLoad={setLoad}\n                  setDisabled={setDisabled} disabled={disabled} setLoading={setLoading}\n                  loading={loading} />\n              </div>\n                :\n                <div className=\"customForm\">\n                  <form onSubmit={handleSubmit(onSubmit)} className=\"signInForm\">\n                    <div className=\"form-group\">\n                      <label className=\"form-label\">Email <span className=\"declined\">*</span></label>\n                      <input\n                        type=\"text\"\n                        className={classNames(\"form-control\", {\n                          \"is-invalid\": errors.p_email,\n                        })}\n                        name=\"p_email\"\n                        ref={register}\n                        placeholder=\"Enter Email\"\n                        onChange={(e) => handleChange(e)}\n                      />\n                    </div>\n\n                    <div className=\"form-group passForm \">\n                      <label className=\"form-label\">Password <span className=\"declined\">*</span></label>\n                      <input\n                        type={isPasswordShow ? \"text\" : \"password\"}\n                        className={classNames(\"form-control\", {\n                          \"is-invalid\": errors.p_password,\n                        })}\n                        name=\"p_password\"\n                        placeholder=\"Enter Password\"\n                        ref={register}\n                      />\n                      <i\n                        className={`fa ${isPasswordShow ? \"fa-eye-slash\" : \"fa-eye\"} password-icon-login`}\n                        onClick={togglePasssword}\n                      />\n                    </div>\n\n                    <div style={{ display: \"flex\", margin: \"0 0 30px 0\", justifyContent: \"flex-end\" }}>\n                      <Link\n                        to={{\n                          pathname: \"/customer/forget-password\",\n                          email: `${email}`,\n                        }}\n                      >\n                        Forgot Password\n                      </Link>\n                    </div>\n\n                    {\n                      loading ?\n                        <Spinner color=\"primary\" />\n                        :\n                        <button className=\"btn btn-success\" type=\"submit\">\n                          Send OTP\n                        </button>\n                    }\n\n                  </form>\n                </div>\n            }\n            <Mandatory />\n          </div>\n\n        </div>\n      </div>\n\n\n      <Footer />\n    </>\n  );\n}\n\nexport default LoginForm;\n\n"]},"metadata":{},"sourceType":"module"}
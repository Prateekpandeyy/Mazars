{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pooja/MazarsRepo/src/pages/TL/SendProposal/ProposalComponent.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useForm, useFieldArray } from \"react-hook-form\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { useHistory } from \"react-router-dom\";\nimport { Card, CardHeader, CardBody, CardTitle, Row, Col, Table, Alert } from \"reactstrap\";\nimport classNames from \"classnames\";\nimport Payment from \"./Payment\";\nimport Select from \"react-select\";\nimport Alerts from \"../../../common/Alerts\";\nimport Mandatory from \"../../../components/Common/Mandatory\";\nimport { Spinner } from 'reactstrap';\n\nfunction ProposalComponent(props) {\n  _s();\n\n  const {\n    id\n  } = props;\n  const history = useHistory();\n  const {\n    handleSubmit,\n    register,\n    errors\n  } = useForm();\n  const userid = window.localStorage.getItem(\"tlkey\");\n  const [loading, setLoading] = useState(false);\n  const [custId, setCustId] = useState(\"\");\n  const [custname, setCustName] = useState();\n  const [assignId, setAssignID] = useState(\"\");\n  const [assingNo, setAssingNo] = useState(\"\");\n  const [store, setStore] = useState(null);\n  const [diserror, setdiserror] = useState(\"\");\n  const [payment, setPayment] = useState([]);\n  const [installment, setInstallment] = useState([]);\n  const [error, setError] = useState('');\n  const [totalAmount, setTotalAmount] = useState(null);\n  const [paymentError, setpaymentError] = useState();\n  const [date, setDate] = useState();\n  const [amount, setAmount] = useState();\n  var current_date = new Date().getFullYear() + '-' + (\"0\" + (new Date().getMonth() + 1)).slice(-2) + '-' + (\"0\" + new Date().getDate()).slice(-2);\n  const [item] = useState(current_date);\n  useEffect(() => {\n    const getQuery = () => {\n      axios.get(`${baseUrl}/tl/pendingTlProposal?tl_id=${JSON.parse(userid)}&assign_id=${id}`).then(res => {\n        if (res.data.code === 1) {\n          if (res.data.result.length > 0) {\n            setAssingNo(res.data.result[0].assign_no);\n            setAssignID(res.data.result[0].id);\n          }\n        }\n      });\n    };\n\n    getQuery();\n  }, []);\n  useEffect(() => {\n    const getUser = async () => {\n      const res = await axios.get(`${baseUrl}/customers/allname?id=${id}`);\n      setCustName(res.data.name);\n      setCustId(res.data.id);\n    };\n\n    getUser();\n  }, [id]);\n\n  const onSubmit = value => {\n    console.log(value);\n    console.log(\"amount --\", amount);\n    console.log(\"date --\", date);\n    var lumsum = value.p_inst_date;\n\n    if (payment.label == \"lumpsum\") {\n      setDate(lumsum);\n    } // var arrAmount = []\n    // var arrDate = []\n\n\n    let formData = new FormData();\n    formData.append(\"assign_no\", assingNo);\n    formData.append(\"name\", value.p_name);\n    formData.append(\"type\", \"tl\");\n    formData.append(\"id\", JSON.parse(userid));\n    formData.append(\"assign_id\", assignId);\n    formData.append(\"customer_id\", custId);\n    formData.append(\"description\", value.description);\n    formData.append(\"amount_type\", \"fixed\");\n    formData.append(\"amount\", value.p_fixed);\n    formData.append(\"installment_amount\", amount);\n    formData.append(\"payment_terms\", payment.value);\n    formData.append(\"no_of_installment\", installment.value);\n    payment.label == \"lumpsum\" ? formData.append(\"due_date\", lumsum) : payment.label == \"installment\" ? formData.append(\"due_date\", date) : formData.append(\"due_date\", \"\");\n\n    if (payment.length < 1) {\n      console.log(\"please select payments terms --\");\n      setpaymentError(\"Please select at lease one\");\n    } else if (payment.value == \"installment\") {\n      if (installment == \"\") {\n        Alerts.ErrorNormal(`Please select no of installment .`);\n        console.log(\"Please select no of installment --\", installment);\n      } else if (!amount || !date) {\n        Alerts.ErrorNormal(`Please enter all fields.`);\n        console.log(\"Please enter all fields\");\n      } else if (amount && date) {\n        console.log(\"all deatils ** here --\");\n        console.log(\"installment.value -\", installment.value);\n\n        if (installment.value > 0) {\n          var a = Number(installment.value);\n\n          for (let i = 0; i < a; i++) {\n            // arrAmount.push(amount[i])\n            // arrDate.push(date[i])\n            if (amount[i] == \"\" || amount[i] == undefined || amount[i] <= 0) {\n              Alerts.ErrorNormal(`Please enter amount`);\n              console.log(\"Please enter amount\");\n              return false;\n            }\n\n            if (date[i] == \"\" || date[i] == undefined) {\n              Alerts.ErrorNormal(`Please enter date`);\n              console.log(\"Please enter date\");\n              return false;\n            }\n          }\n\n          var sum = amount.reduce(myFunction);\n\n          function myFunction(total, value) {\n            return Number(total) + Number(value);\n          }\n\n          if (value.p_fixed != sum) {\n            Alerts.ErrorNormal(`Sum of all installments should be equal to ${value.p_fixed}.`);\n            console.log(`Sum of all installments should be equal to ${value.p_fixed}.`);\n          } else {\n            console.log(\"call else fine api for installment\");\n            setLoading(true);\n            axios({\n              method: \"POST\",\n              url: `${baseUrl}/tl/uploadProposal`,\n              data: formData\n            }).then(function (response) {\n              console.log(\"res-\", response);\n\n              if (response.data.code === 1) {\n                setLoading(false);\n                Alerts.SuccessNormal(\"Proposal sent successfully.\");\n                history.push(\"/teamleader/proposal\");\n              } else if (response.data.code === 0) {\n                setLoading(false);\n              }\n            }).catch(error => {\n              console.log(\"erroror - \", error);\n            });\n          }\n        }\n      }\n    } else if (payment.label == \"lumpsum\") {\n      console.log(\"call api for lumshum\");\n      setLoading(true);\n      axios({\n        method: \"POST\",\n        url: `${baseUrl}/tl/uploadProposal`,\n        data: formData\n      }).then(function (response) {\n        console.log(\"res-\", response);\n\n        if (response.data.code === 1) {\n          setLoading(false);\n          var variable = \"Proposal sent successfully. \";\n          Alerts.SuccessNormal(variable);\n          history.push(\"/teamleader/proposal\");\n        } else if (response.data.code === 0) {\n          setLoading(false);\n        }\n      }).catch(error => {\n        console.log(\"erroror - \", error);\n      });\n    }\n  };\n\n  const paymentAmount = data => {\n    console.log(\"paymentAmount\", data);\n    var array1 = [];\n    Object.entries(data).map(([key, value]) => {\n      array1.push(value);\n    });\n    setAmount(array1);\n  };\n\n  const paymentDate = data => {\n    console.log(\"paymentDate\", data);\n    var array2 = [];\n    Object.entries(data).map(([key, value]) => {\n      array2.push(value);\n    });\n    setDate(array2);\n  };\n\n  const handleChange = e => {\n    console.log(\"val-\", e.target.value);\n\n    if (isNaN(e.target.value)) {\n      setdiserror(\"Please enter number only.\");\n    } else {\n      setdiserror(\"\");\n    }\n\n    setTotalAmount(e.target.value);\n  };\n\n  const installmentHandler = key => {\n    console.log(\"key\", key);\n    setInstallment(key);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: \"5\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-success ml-3\",\n              onClick: () => history.goBack(),\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                class: \"fas fa-arrow-left mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 17\n              }, this), \"Go Back\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: \"7\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Prepare Proposal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: \"red\"\n            },\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-md-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Query No.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 278,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"p_assingment\",\n                  className: \"form-control\",\n                  value: assingNo,\n                  ref: register\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 279,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 277,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Fee\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  class: \"form-control\",\n                  ref: register,\n                  name: \"p_type\",\n                  onChange: e => setStore(e.target.value),\n                  children: /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"fixed\",\n                    children: \"Fixed Price\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 295,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Fixed Price\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"declined\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 300,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"p_fixed\",\n                  className: classNames(\"form-control\", {\n                    \"is-invalid\": errors.p_fixed\n                  }),\n                  ref: register({\n                    required: true\n                  }),\n                  placeholder: \"Enter Fixed Price\",\n                  onChange: e => handleChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  \"color\": \"red\"\n                },\n                children: diserror\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Scope of Work\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"declined\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 39\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 314,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  className: classNames(\"form-control\", {\n                    \"is-invalid\": errors.description\n                  }),\n                  id: \"textarea\",\n                  rows: \"3\",\n                  name: \"description\",\n                  ref: register({\n                    required: true\n                  }),\n                  placeholder: \"Enter Proposal Description\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-md-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Customer Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 330,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"p_name\",\n                  className: \"form-control\",\n                  value: custname,\n                  ref: register\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 331,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: [\"Payment Terms\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"declined\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 341,\n                    columnNumber: 39\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  className: paymentError ? \"customError\" : \"\",\n                  onChange: e => {\n                    setPayment(e);\n                    setpaymentError(\"\");\n                  },\n                  options: payment_terms\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 17\n              }, this), payment.label == \"lumpsum\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Due Dates\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  name: \"p_inst_date\",\n                  className: classNames(\"form-control\", {\n                    \"is-invalid\": errors.p_inst_date\n                  }),\n                  ref: register({\n                    required: true\n                  }),\n                  placeholder: \"Enter Hourly basis\",\n                  min: item\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 354,\n                columnNumber: 19\n              }, this) : payment.label == \"installment\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"No of Installments\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  onChange: e => installmentHandler(e),\n                  options: no_installments\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 21\n              }, this) : \"\", payment.label == \"lumpsum\" ? \"\" : /*#__PURE__*/_jsxDEV(Payment, {\n                installment: installment.label,\n                paymentAmount: paymentAmount,\n                paymentDate: paymentDate,\n                totalAmount: totalAmount,\n                min: item,\n                item: item\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"form-group col-md-6\",\n            children: loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              class: \"btn btn-primary\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Mandatory, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(ProposalComponent, \"Jc0fRWRrp5kiJixsNQjVxQCK1kU=\", false, function () {\n  return [useHistory, useForm];\n});\n\n_c = ProposalComponent;\nexport default ProposalComponent;\nconst payment_terms = [{\n  value: \"lumpsum\",\n  label: \"lumpsum\"\n}, {\n  value: \"installment\",\n  label: \"installment\"\n}];\nconst no_installments = [{\n  value: \"2\",\n  label: \"2\"\n}, {\n  value: \"3\",\n  label: \"3\"\n}, {\n  value: \"4\",\n  label: \"4\"\n}]; // if (amount) {\n//   var sum = amount.reduce(myFunction)\n//   function myFunction(total, value) {\n//     return Number(total) + Number(value);\n//   }\n// }\n// if (value.p_fixed != sum) {\n//   Alerts.ErrorNormal(`Sum of all installments should be equal to ${value.p_fixed}.`)\n// } else if (!date) {\n//   console.log(\"call date\")\n//   Alerts.ErrorNormal(`Please date should be enter`)\n// }\n// var lumsum = value.p_inst_date\n// setDate(lumsum)\n// if (payment.length < 1) {\n//   setpaymentError(\"Please select at lease one\")\n// }\n// else {\n//   setpaymentError(\"\")\n//   let formData = new FormData();\n// formData.append(\"assign_no\", assingNo);\n// formData.append(\"name\", value.p_name);\n// formData.append(\"type\", \"tl\");\n// formData.append(\"id\", JSON.parse(userid));\n// formData.append(\"assign_id\", assignId);\n// formData.append(\"customer_id\", custId);\n// formData.append(\"description\", value.description);\n// formData.append(\"amount_type\", \"fixed\");\n// formData.append(\"amount\", value.p_fixed);\n// formData.append(\"installment_amount\", amount);\n// formData.append(\"payment_terms\", payment.value);\n// formData.append(\"no_of_installment\", installment.value);\n// payment.label == \"lumpsum\" ?\n//   formData.append(\"due_date\", lumsum) :\n//   payment.label == \"installment\" ?\n//     formData.append(\"due_date\", date) :\n//     formData.append(\"due_date\", \"\")\n//   console.log(\"payment -\", payment.label)\n//   if (payment.value == \"installment\") {\n//     console.log(\"amount --\", amount)\n//     console.log(\"date --\", date)\n// if (!amount || !date) {\n//   Alerts.ErrorNormal(`please enter all fields`)\n// } else\n// if (amount && date) {\n//   if (installment.value > 0) {\n//     console.log(\"installment** --\")\n//     var a = Number(installment.value)\n//     for (let i = 0; i < a; i++) {\n//       // console.log(\"call for loop\", i, amount[i])\n//       if (amount[i] == \"\" || amount[i] == undefined || amount[i] <= 0) {\n//         console.log(\"amount --1\", amount[i])\n//         Alerts.ErrorNormal(`please insert all fields.`)\n//         return false\n//       }\n//     }\n//     var sum = amount.reduce(myFunction)\n//     function myFunction(total, value) {\n//       return Number(total) + Number(value);\n//     }\n//     if (value.p_fixed != sum) {\n//       Alerts.ErrorNormal(`Sum of all installments should be equal to ${value.p_fixed}.`)\n//     } else {\n//       console.log(\"calll else fine api\")\n//     }\n//   }\n//       }\n//       else {\n//         console.log(\"call else\")\n//         return false\n//         setLoading(true)\n// axios({\n//   method: \"POST\",\n//   url: `${baseUrl}/tl/uploadProposal`,\n//   data: formData,\n// })\n//   .then(function (response) {\n//     console.log(\"res-\", response);\n//     if (response.data.code === 1) {\n//       setLoading(false)\n//       Alerts.SuccessNormal(\"Proposal sent successfully.\")\n//       history.push(\"/teamleader/proposal\");\n//     } else if (response.data.code === 0) {\n//       setLoading(false)\n//     }\n//   })\n//   .catch((error) => {\n//     console.log(\"erroror - \", error);\n//   });\n//       }\n//   }\n//   else {\n// setLoading(true)\n// axios({\n//   method: \"POST\",\n//   url: `${baseUrl}/tl/uploadProposal`,\n//   data: formData,\n// })\n//   .then(function (response) {\n//     console.log(\"res-\", response);\n//     if (response.data.code === 1) {\n//       setLoading(false)\n//       var variable = \"Proposal sent successfully. \"\n//       Alerts.SuccessNormal(variable)\n//       history.push(\"/teamleader/proposal\");\n//     } else if (response.data.code === 0) {\n//       setLoading(false)\n//     }\n//   })\n//   .catch((error) => {\n//     console.log(\"erroror - \", error);\n//   });\n//   }\n// }\n\nvar _c;\n\n$RefreshReg$(_c, \"ProposalComponent\");","map":{"version":3,"sources":["/home/pooja/MazarsRepo/src/pages/TL/SendProposal/ProposalComponent.js"],"names":["React","useState","useEffect","useForm","useFieldArray","axios","baseUrl","useHistory","Card","CardHeader","CardBody","CardTitle","Row","Col","Table","Alert","classNames","Payment","Select","Alerts","Mandatory","Spinner","ProposalComponent","props","id","history","handleSubmit","register","errors","userid","window","localStorage","getItem","loading","setLoading","custId","setCustId","custname","setCustName","assignId","setAssignID","assingNo","setAssingNo","store","setStore","diserror","setdiserror","payment","setPayment","installment","setInstallment","error","setError","totalAmount","setTotalAmount","paymentError","setpaymentError","date","setDate","amount","setAmount","current_date","Date","getFullYear","getMonth","slice","getDate","item","getQuery","get","JSON","parse","then","res","data","code","result","length","assign_no","getUser","name","onSubmit","value","console","log","lumsum","p_inst_date","label","formData","FormData","append","p_name","description","p_fixed","ErrorNormal","a","Number","i","undefined","sum","reduce","myFunction","total","method","url","response","SuccessNormal","push","catch","variable","paymentAmount","array1","Object","entries","map","key","paymentDate","array2","handleChange","e","target","isNaN","installmentHandler","goBack","color","display","required","payment_terms","no_installments"],"mappings":"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,eAAe,GAAG,CACtB;AACE9C,EAAAA,KAAK,EAAE,GADT;AAEEK,EAAAA,KAAK,EAAE;AAFT,CADsB,EAKtB;AACEL,EAAAA,KAAK,EAAE,GADT;AAEEK,EAAAA,KAAK,EAAE;AAFT,CALsB,EAStB;AACEL,EAAAA,KAAK,EAAE,GADT;AAEEK,EAAAA,KAAK,EAAE;AAFT,CATsB,CAAxB,C,CAgBI;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEP;AACG;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useForm, useFieldArray } from \"react-hook-form\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { useHistory } from \"react-router-dom\";\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  CardTitle,\n  Row,\n  Col,\n  Table,\n  Alert,\n} from \"reactstrap\";\nimport classNames from \"classnames\";\nimport Payment from \"./Payment\";\nimport Select from \"react-select\";\nimport Alerts from \"../../../common/Alerts\";\nimport Mandatory from \"../../../components/Common/Mandatory\";\nimport { Spinner } from 'reactstrap';\n\n\n\nfunction ProposalComponent(props) {\n  const { id } = props;\n  const history = useHistory();\n  const { handleSubmit, register, errors } = useForm();\n\n  const userid = window.localStorage.getItem(\"tlkey\");\n  const [loading, setLoading] = useState(false);\n\n  const [custId, setCustId] = useState(\"\");\n  const [custname, setCustName] = useState();\n  const [assignId, setAssignID] = useState(\"\");\n  const [assingNo, setAssingNo] = useState(\"\");\n  const [store, setStore] = useState(null);\n  const [diserror, setdiserror] = useState(\"\")\n  const [payment, setPayment] = useState([]);\n  const [installment, setInstallment] = useState([]);\n  const [error, setError] = useState('');\n  const [totalAmount, setTotalAmount] = useState(null);\n  const [paymentError, setpaymentError] = useState();\n\n  const [date, setDate] = useState();\n  const [amount, setAmount] = useState();\n\n  var current_date = new Date().getFullYear() + '-' + (\"0\" + (new Date().getMonth() + 1)).slice(-2) + '-' + (\"0\" + new Date().getDate()).slice(-2)\n  const [item] = useState(current_date);\n\n\n  useEffect(() => {\n    const getQuery = () => {\n      axios\n        .get(\n          `${baseUrl}/tl/pendingTlProposal?tl_id=${JSON.parse(\n            userid\n          )}&assign_id=${id}`\n        )\n        .then((res) => {\n          if (res.data.code === 1) {\n            if (res.data.result.length > 0) {\n              setAssingNo(res.data.result[0].assign_no);\n              setAssignID(res.data.result[0].id);\n            }\n          }\n        });\n    };\n    getQuery();\n  }, []);\n\n\n  useEffect(() => {\n    const getUser = async () => {\n      const res = await axios.get(`${baseUrl}/customers/allname?id=${id}`);\n      setCustName(res.data.name);\n      setCustId(res.data.id);\n    };\n\n    getUser();\n  }, [id]);\n\n\n  const onSubmit = (value) => {\n    console.log(value);\n\n    console.log(\"amount --\", amount)\n    console.log(\"date --\", date)\n\n    var lumsum = value.p_inst_date\n    if (payment.label == \"lumpsum\") {\n      setDate(lumsum)\n    }\n    \n    // var arrAmount = []\n    // var arrDate = []\n\n    let formData = new FormData();\n    formData.append(\"assign_no\", assingNo);\n    formData.append(\"name\", value.p_name);\n    formData.append(\"type\", \"tl\");\n    formData.append(\"id\", JSON.parse(userid));\n    formData.append(\"assign_id\", assignId);\n    formData.append(\"customer_id\", custId);\n    formData.append(\"description\", value.description);\n    formData.append(\"amount_type\", \"fixed\");\n    formData.append(\"amount\", value.p_fixed);\n    formData.append(\"installment_amount\", amount);\n\n    formData.append(\"payment_terms\", payment.value);\n    formData.append(\"no_of_installment\", installment.value);\n\n    payment.label == \"lumpsum\" ?\n      formData.append(\"due_date\", lumsum) :\n      payment.label == \"installment\" ?\n        formData.append(\"due_date\", date) :\n        formData.append(\"due_date\", \"\")\n\n    if (payment.length < 1) {\n      console.log(\"please select payments terms --\")\n      setpaymentError(\"Please select at lease one\")\n    } else\n      if (payment.value == \"installment\") {\n        if (installment == \"\") {\n          Alerts.ErrorNormal(`Please select no of installment .`)\n          console.log(\"Please select no of installment --\", installment)\n        } else\n          if (!amount || !date) {\n            Alerts.ErrorNormal(`Please enter all fields.`)\n            console.log(\"Please enter all fields\")\n          } else if (amount && date) {\n            console.log(\"all deatils ** here --\")\n\n            console.log(\"installment.value -\", installment.value)\n\n            if (installment.value > 0) {\n              var a = Number(installment.value)\n              for (let i = 0; i < a; i++) {\n                // arrAmount.push(amount[i])\n                // arrDate.push(date[i])\n                if (amount[i] == \"\" || amount[i] == undefined || amount[i] <= 0) {\n                  Alerts.ErrorNormal(`Please enter amount`)\n                  console.log(\"Please enter amount\")\n                  return false\n                }\n                if (date[i] == \"\" || date[i] == undefined) {\n                  Alerts.ErrorNormal(`Please enter date`)\n                  console.log(\"Please enter date\")\n                  return false\n                }\n              }\n              var sum = amount.reduce(myFunction)\n              function myFunction(total, value) {\n                return Number(total) + Number(value);\n              }\n              if (value.p_fixed != sum) {\n                Alerts.ErrorNormal(`Sum of all installments should be equal to ${value.p_fixed}.`)\n                console.log(`Sum of all installments should be equal to ${value.p_fixed}.`)\n              } else {\n                console.log(\"call else fine api for installment\")\n                setLoading(true)\n                axios({\n                  method: \"POST\",\n                  url: `${baseUrl}/tl/uploadProposal`,\n                  data: formData,\n                })\n                  .then(function (response) {\n                    console.log(\"res-\", response);\n                    if (response.data.code === 1) {\n                      setLoading(false)\n                      Alerts.SuccessNormal(\"Proposal sent successfully.\")\n                      history.push(\"/teamleader/proposal\");\n                    } else if (response.data.code === 0) {\n                      setLoading(false)\n                    }\n                  })\n                  .catch((error) => {\n                    console.log(\"erroror - \", error);\n                  });\n              }\n            }\n          }\n      } else if (payment.label == \"lumpsum\") {\n        console.log(\"call api for lumshum\",)\n        setLoading(true)\n        axios({\n          method: \"POST\",\n          url: `${baseUrl}/tl/uploadProposal`,\n          data: formData,\n        })\n          .then(function (response) {\n            console.log(\"res-\", response);\n            if (response.data.code === 1) {\n              setLoading(false)\n              var variable = \"Proposal sent successfully. \"\n              Alerts.SuccessNormal(variable)\n              history.push(\"/teamleader/proposal\");\n            } else if (response.data.code === 0) {\n              setLoading(false)\n            }\n          })\n          .catch((error) => {\n            console.log(\"erroror - \", error);\n          });\n      }\n\n\n\n  };\n\n\n\n  const paymentAmount = (data) => {\n    console.log(\"paymentAmount\", data)\n\n    var array1 = []\n    Object.entries(data).map(([key, value]) => {\n      array1.push(value)\n    });\n    setAmount(array1);\n  };\n\n  const paymentDate = (data) => {\n    console.log(\"paymentDate\", data)\n\n    var array2 = []\n    Object.entries(data).map(([key, value]) => {\n      array2.push(value)\n    });\n    setDate(array2);\n  };\n\n\n  const handleChange = (e) => {\n    console.log(\"val-\", e.target.value);\n    if (isNaN(e.target.value)) {\n      setdiserror(\"Please enter number only.\");\n    }\n    else {\n      setdiserror(\"\");\n    }\n    setTotalAmount(e.target.value);\n  };\n\n  const installmentHandler = (key) => {\n    console.log(\"key\", key)\n    setInstallment(key)\n  }\n\n  return (\n    <>\n      <Card>\n        <CardHeader>\n          <Row>\n            <Col md=\"5\">\n              <button\n                class=\"btn btn-success ml-3\"\n                onClick={() => history.goBack()}\n              >\n                <i class=\"fas fa-arrow-left mr-2\"></i>\n                Go Back\n              </button>\n            </Col>\n            <Col md=\"7\">\n              <div>\n                <h4>Prepare Proposal</h4>\n              </div>\n            </Col>\n          </Row>\n        </CardHeader>\n\n        <CardBody>\n          <form onSubmit={handleSubmit(onSubmit)}>\n            <p style={{ color: \"red\" }}>{error}</p>\n            <div style={{ display: \"flex\" }}>\n              <div class=\"col-md-6\">\n                <div class=\"form-group\">\n                  <label>Query No.</label>\n                  <input\n                    type=\"text\"\n                    name=\"p_assingment\"\n                    className=\"form-control\"\n                    value={assingNo}\n                    ref={register}\n                  />\n                </div>\n                <div class=\"form-group\">\n                  <label>Fee</label>\n                  <select\n                    class=\"form-control\"\n                    ref={register}\n                    name=\"p_type\"\n                    onChange={(e) => setStore(e.target.value)}\n                  >\n                    <option value=\"fixed\">Fixed Price</option>\n                  </select>\n                </div>\n\n                <div class=\"form-group\">\n                  <label>Fixed Price<span className=\"declined\">*</span></label>\n                  <input\n                    type=\"text\"\n                    name=\"p_fixed\"\n                    className={classNames(\"form-control\", {\n                      \"is-invalid\": errors.p_fixed,\n                    })}\n                    ref={register({ required: true })}\n                    placeholder=\"Enter Fixed Price\"\n                    onChange={(e) => handleChange(e)}\n                  />\n                </div>\n                <p style={{ \"color\": \"red\" }}>{diserror}</p>\n                <div class=\"form-group\">\n                  <label>Scope of Work<span className=\"declined\">*</span></label>\n                  <textarea\n                    className={classNames(\"form-control\", {\n                      \"is-invalid\": errors.description,\n                    })}\n                    id=\"textarea\"\n                    rows=\"3\"\n                    name=\"description\"\n                    ref={register({ required: true })}\n                    placeholder=\"Enter Proposal Description\"\n                  ></textarea>\n                </div>\n              </div>\n\n              <div class=\"col-md-6\">\n                <div class=\"form-group\">\n                  <label>Customer Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"p_name\"\n                    className=\"form-control\"\n                    value={custname}\n                    ref={register}\n                  />\n                </div>\n\n                <div class=\"form-group\">\n                  <label>Payment Terms<span className=\"declined\">*</span></label>\n                  <Select\n                    className={paymentError ? \"customError\" : \"\"}\n                    onChange={(e) => {\n                      setPayment(e)\n                      setpaymentError(\"\")\n                    }}\n                    options={payment_terms}\n                  />\n\n                </div>\n\n                {payment.label == \"lumpsum\" ? (\n                  <div class=\"form-group\">\n                    <label>Due Dates</label>\n                    <input\n                      type=\"date\"\n                      name=\"p_inst_date\"\n                      className={classNames(\"form-control\", {\n                        \"is-invalid\": errors.p_inst_date\n                      })}\n                      ref={register({ required: true })}\n                      placeholder=\"Enter Hourly basis\"\n                      min={item}\n                    />\n                  </div>\n                ) :\n                  payment.label == \"installment\" ? (\n                    <div class=\"form-group\">\n                      <label>No of Installments</label>\n                      <Select\n                        onChange={(e => installmentHandler(e))}\n                        options={no_installments}\n                      />\n                    </div>\n                  )\n                    : \"\"\n                }\n\n                {\n                  payment.label == \"lumpsum\"\n                    ?\n                    \"\"\n                    :\n                    <Payment\n                      installment={installment.label}\n                      paymentAmount={paymentAmount}\n                      paymentDate={paymentDate}\n                      totalAmount={totalAmount}\n                      min={item}\n                      item={item}\n                    />\n                }\n\n              </div>\n            </div>\n\n\n            <div class=\"form-group col-md-6\">\n              {\n                loading ?\n                  <Spinner color=\"primary\" />\n                  :\n                  <button type=\"submit\" class=\"btn btn-primary\">\n                    Submit\n                  </button>\n              }\n            </div>\n\n          </form>\n          <Mandatory />\n        </CardBody>\n      </Card>\n    </>\n  );\n}\n\nexport default ProposalComponent;\n\n\nconst payment_terms = [\n  {\n    value: \"lumpsum\",\n    label: \"lumpsum\",\n  },\n  {\n    value: \"installment\",\n    label: \"installment\",\n  },\n];\n\nconst no_installments = [\n  {\n    value: \"2\",\n    label: \"2\",\n  },\n  {\n    value: \"3\",\n    label: \"3\",\n  },\n  {\n    value: \"4\",\n    label: \"4\",\n  },\n];\n\n\n    // if (amount) {\n        //   var sum = amount.reduce(myFunction)\n        //   function myFunction(total, value) {\n        //     return Number(total) + Number(value);\n        //   }\n        // }\n        // if (value.p_fixed != sum) {\n        //   Alerts.ErrorNormal(`Sum of all installments should be equal to ${value.p_fixed}.`)\n        // } else if (!date) {\n        //   console.log(\"call date\")\n        //   Alerts.ErrorNormal(`Please date should be enter`)\n        // }\n\n // var lumsum = value.p_inst_date\n    // setDate(lumsum)\n\n    // if (payment.length < 1) {\n    //   setpaymentError(\"Please select at lease one\")\n    // }\n    // else {\n    //   setpaymentError(\"\")\n    //   let formData = new FormData();\n\n    // formData.append(\"assign_no\", assingNo);\n    // formData.append(\"name\", value.p_name);\n    // formData.append(\"type\", \"tl\");\n    // formData.append(\"id\", JSON.parse(userid));\n    // formData.append(\"assign_id\", assignId);\n    // formData.append(\"customer_id\", custId);\n    // formData.append(\"description\", value.description);\n\n    // formData.append(\"amount_type\", \"fixed\");\n    // formData.append(\"amount\", value.p_fixed);\n    // formData.append(\"installment_amount\", amount);\n\n    // formData.append(\"payment_terms\", payment.value);\n    // formData.append(\"no_of_installment\", installment.value);\n\n    // payment.label == \"lumpsum\" ?\n    //   formData.append(\"due_date\", lumsum) :\n    //   payment.label == \"installment\" ?\n    //     formData.append(\"due_date\", date) :\n    //     formData.append(\"due_date\", \"\")\n\n    //   console.log(\"payment -\", payment.label)\n\n    //   if (payment.value == \"installment\") {\n    //     console.log(\"amount --\", amount)\n    //     console.log(\"date --\", date)\n\n    // if (!amount || !date) {\n    //   Alerts.ErrorNormal(`please enter all fields`)\n    // } else\n    // if (amount && date) {\n    //   if (installment.value > 0) {\n    //     console.log(\"installment** --\")\n\n    //     var a = Number(installment.value)\n    //     for (let i = 0; i < a; i++) {\n    //       // console.log(\"call for loop\", i, amount[i])\n    //       if (amount[i] == \"\" || amount[i] == undefined || amount[i] <= 0) {\n    //         console.log(\"amount --1\", amount[i])\n    //         Alerts.ErrorNormal(`please insert all fields.`)\n    //         return false\n    //       }\n    //     }\n    //     var sum = amount.reduce(myFunction)\n    //     function myFunction(total, value) {\n    //       return Number(total) + Number(value);\n    //     }\n    //     if (value.p_fixed != sum) {\n    //       Alerts.ErrorNormal(`Sum of all installments should be equal to ${value.p_fixed}.`)\n    //     } else {\n    //       console.log(\"calll else fine api\")\n    //     }\n    //   }\n    //       }\n    //       else {\n    //         console.log(\"call else\")\n    //         return false\n    //         setLoading(true)\n    // axios({\n    //   method: \"POST\",\n    //   url: `${baseUrl}/tl/uploadProposal`,\n    //   data: formData,\n    // })\n    //   .then(function (response) {\n    //     console.log(\"res-\", response);\n    //     if (response.data.code === 1) {\n    //       setLoading(false)\n    //       Alerts.SuccessNormal(\"Proposal sent successfully.\")\n    //       history.push(\"/teamleader/proposal\");\n    //     } else if (response.data.code === 0) {\n    //       setLoading(false)\n    //     }\n    //   })\n    //   .catch((error) => {\n    //     console.log(\"erroror - \", error);\n    //   });\n    //       }\n    //   }\n    //   else {\n    // setLoading(true)\n    // axios({\n    //   method: \"POST\",\n    //   url: `${baseUrl}/tl/uploadProposal`,\n    //   data: formData,\n    // })\n    //   .then(function (response) {\n    //     console.log(\"res-\", response);\n    //     if (response.data.code === 1) {\n    //       setLoading(false)\n\n    //       var variable = \"Proposal sent successfully. \"\n    //       Alerts.SuccessNormal(variable)\n    //       history.push(\"/teamleader/proposal\");\n    //     } else if (response.data.code === 0) {\n    //       setLoading(false)\n    //     }\n    //   })\n    //   .catch((error) => {\n    //     console.log(\"erroror - \", error);\n    //   });\n    //   }\n    // }\n"]},"metadata":{},"sourceType":"module"}
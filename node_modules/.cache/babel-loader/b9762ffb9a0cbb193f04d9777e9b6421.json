{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pooja/MazarsRepo/src/pages/TL/PendingForAcceptence/PendingForAcceptence.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { Link } from \"react-router-dom\";\nimport { Card, CardHeader, CardBody } from \"reactstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport TeamFilter from \"../../../components/Search-Filter/tlFilter\";\nimport RejectedModal from \"./RejectedModal\";\nimport Alerts from \"../../../common/Alerts\";\nimport { Spinner } from 'reactstrap';\n\nfunction PendingForAcceptence({\n  CountPendingForAcceptence,\n  updateTab\n}) {\n  _s();\n\n  const userid = window.localStorage.getItem(\"tlkey\");\n  const [loading, setLoading] = useState(false);\n  const [pendingData, setPendingData] = useState([]);\n  const [records, setRecords] = useState([]);\n  const [pay, setPay] = useState({\n    id: \"\",\n    allocation_id: \"\"\n  });\n  const [addPaymentModal, setPaymentModal] = useState(false);\n\n  const rejectHandler = key => {\n    console.log(\"key\", key);\n    setPaymentModal(!addPaymentModal);\n    setPay({\n      id: key.id,\n      allocation_id: key.allocation_id\n    });\n  };\n\n  useEffect(() => {\n    getPendingforAcceptance();\n  }, []);\n\n  const getPendingforAcceptance = () => {\n    axios.get(`${baseUrl}/tl/pendingQues?id=${JSON.parse(userid)}`).then(res => {\n      console.log(res);\n\n      if (res.data.code === 1) {\n        setPendingData(res.data.result);\n        setRecords(res.data.result.length); // CountPendingForAcceptence(res.data.result.length);\n      }\n    });\n  };\n\n  const columns = [{\n    text: \"S.No\",\n    dataField: \"\",\n    formatter: (cellContent, row, rowIndex) => {\n      return rowIndex + 1;\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\",\n        width: \"50px\"\n      };\n    }\n  }, {\n    text: \"Date\",\n    dataField: \"query_created\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function dateFormat(cell, row) {\n      console.log(\"dt\", row.query_created);\n      var oldDate = row.query_created;\n\n      if (oldDate == null) {\n        return null;\n      }\n\n      return oldDate.toString().split(\"-\").reverse().join(\"-\");\n    }\n  }, {\n    text: \"Query No\",\n    dataField: \"assign_no\",\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function nameFormatter(cell, row) {\n      console.log(row);\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: {\n            pathname: `/teamleader/queries/${row.id}`,\n            index: 0,\n            routes: \"queriestab\"\n          },\n          children: row.assign_no\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)\n      }, void 0, false);\n    }\n  }, {\n    text: \"Category\",\n    dataField: \"parent_id\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    }\n  }, {\n    text: \"Sub Category\",\n    dataField: \"cat_name\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    }\n  }, {\n    text: \"Customer Name\",\n    dataField: \"name\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    }\n  }, {\n    text: \"\tExp. Delivery Date\",\n    dataField: \"Exp_Delivery_Date\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function dateFormat(cell, row) {\n      console.log(\"dt\", row.Exp_Delivery_Date);\n      var oldDate = row.Exp_Delivery_Date;\n\n      if (oldDate == null) {\n        return null;\n      }\n\n      return oldDate.toString().split(\"-\").reverse().join(\"-\");\n    }\n  }, {\n    text: \"Accept / Reject\",\n    dataField: \"\",\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function (cell, row) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"space-evenly\",\n            color: \"#6967ce\",\n            cursor: \"pointer\"\n          },\n          id: \"div1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"accept\",\n            title: \"Accept Assignment\",\n            onClick: () => acceptHandler(row),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa fa-check\",\n              style: {\n                color: \"green\",\n                fontSize: \"16px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"reject\",\n            title: \"Reject Assignment\" // onClick={() => rejectHandler(row)}\n            ,\n            onClick: () => rejectHandler(row),\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"fa fa-times\",\n              style: {\n                color: \"red\",\n                fontSize: \"16px\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)\n      }, void 0, false);\n    }\n  }];\n\n  const acceptHandler = key => {\n    console.log(\"acceptHandler\", key);\n    setLoading(true);\n    let formData = new FormData();\n    formData.append(\"set\", 1);\n    formData.append(\"tlid\", JSON.parse(userid));\n    formData.append(\"assignment_id\", key.id);\n    formData.append(\"allocation_id\", key.allocation_id);\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/tl/AcceptRejectQuery`,\n      data: formData\n    }).then(function (response) {\n      console.log(\"response-\", response);\n\n      if (response.data.code === 1) {\n        setLoading(false);\n        Alerts.SuccessNormal(\"Query accepted successfully.\");\n        getPendingforAcceptance();\n        updateTab(1);\n      } else if (response.data.code === 0) {\n        setLoading(false);\n      }\n    }).catch(error => {\n      console.log(\"erroror - \", error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: /*#__PURE__*/_jsxDEV(TeamFilter, {\n          setData: setPendingData,\n          getData: getPendingforAcceptance,\n          pendingForAcceptence: \"pendingForAcceptence\",\n          setRecords: setRecords,\n          records: records\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n        children: [loading ? /*#__PURE__*/_jsxDEV(Spinner, {\n          color: \"primary\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(BootstrapTable, {\n          bootstrap4: true,\n          keyField: \"id\",\n          data: pendingData,\n          columns: columns,\n          rowIndex: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(RejectedModal, {\n          rejectHandler: rejectHandler,\n          addPaymentModal: addPaymentModal,\n          pay: pay,\n          getPendingforAcceptance: getPendingforAcceptance\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(PendingForAcceptence, \"ls1PtiIc8DCdRGt/HQWNTzdKVcw=\");\n\n_c = PendingForAcceptence;\nexport default PendingForAcceptence;\n\nvar _c;\n\n$RefreshReg$(_c, \"PendingForAcceptence\");","map":{"version":3,"sources":["/home/pooja/MazarsRepo/src/pages/TL/PendingForAcceptence/PendingForAcceptence.js"],"names":["React","useState","useEffect","axios","baseUrl","Link","Card","CardHeader","CardBody","BootstrapTable","TeamFilter","RejectedModal","Alerts","Spinner","PendingForAcceptence","CountPendingForAcceptence","updateTab","userid","window","localStorage","getItem","loading","setLoading","pendingData","setPendingData","records","setRecords","pay","setPay","id","allocation_id","addPaymentModal","setPaymentModal","rejectHandler","key","console","log","getPendingforAcceptance","get","JSON","parse","then","res","data","code","result","length","columns","text","dataField","formatter","cellContent","row","rowIndex","headerStyle","fontSize","width","sort","dateFormat","cell","query_created","oldDate","toString","split","reverse","join","nameFormatter","pathname","index","routes","assign_no","Exp_Delivery_Date","display","justifyContent","color","cursor","acceptHandler","formData","FormData","append","method","url","response","SuccessNormal","catch","error"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n} from \"reactstrap\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport TeamFilter from \"../../../components/Search-Filter/tlFilter\";\nimport RejectedModal from \"./RejectedModal\";\nimport Alerts from \"../../../common/Alerts\";\nimport { Spinner } from 'reactstrap';\n\n\nfunction PendingForAcceptence({ CountPendingForAcceptence, updateTab }) {\n  const userid = window.localStorage.getItem(\"tlkey\");\n  const [loading, setLoading] = useState(false);\n\n  const [pendingData, setPendingData] = useState([]);\n  const [records, setRecords] = useState([]);\n\n  const [pay, setPay] = useState({\n    id: \"\",\n    allocation_id: \"\",\n  });\n\n  const [addPaymentModal, setPaymentModal] = useState(false);\n  const rejectHandler = (key) => {\n    console.log(\"key\", key);\n    setPaymentModal(!addPaymentModal);\n    setPay({\n      id: key.id,\n      allocation_id: key.allocation_id,\n    });\n  };\n\n  useEffect(() => {\n    getPendingforAcceptance();\n  }, []);\n\n  const getPendingforAcceptance = () => {\n    axios\n      .get(`${baseUrl}/tl/pendingQues?id=${JSON.parse(userid)}`)\n      .then((res) => {\n        console.log(res);\n        if (res.data.code === 1) {\n          setPendingData(res.data.result);\n          setRecords(res.data.result.length);\n          // CountPendingForAcceptence(res.data.result.length);\n        }\n      });\n  };\n\n  const columns = [\n    {\n      text: \"S.No\",\n      dataField: \"\",\n      formatter: (cellContent, row, rowIndex) => {\n        return rowIndex + 1;\n      },\n      headerStyle: () => {\n        return { fontSize: \"12px\", width: \"50px\" };\n      },\n    },\n    {\n      text: \"Date\",\n      dataField: \"query_created\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n      formatter: function dateFormat(cell, row) {\n        console.log(\"dt\", row.query_created);\n        var oldDate = row.query_created;\n        if (oldDate == null) {\n          return null;\n        }\n        return oldDate.toString().split(\"-\").reverse().join(\"-\");\n      },\n    },\n    {\n      text: \"Query No\",\n      dataField: \"assign_no\",\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n      formatter: function nameFormatter(cell, row) {\n        console.log(row);\n        return (\n          <>\n            <Link\n              to={{\n                pathname: `/teamleader/queries/${row.id}`,\n                index: 0,\n                routes: \"queriestab\",\n              }}\n            >\n              {row.assign_no}\n            </Link>\n          </>\n        );\n      },\n    },\n    {\n      text: \"Category\",\n      dataField: \"parent_id\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n    },\n    {\n      text: \"Sub Category\",\n      dataField: \"cat_name\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n    },\n    {\n      text: \"Customer Name\",\n      dataField: \"name\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n    },\n    {\n      text: \"\tExp. Delivery Date\",\n      dataField: \"Exp_Delivery_Date\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n      formatter: function dateFormat(cell, row) {\n        console.log(\"dt\", row.Exp_Delivery_Date);\n        var oldDate = row.Exp_Delivery_Date;\n        if (oldDate == null) {\n          return null;\n        }\n        return oldDate.toString().split(\"-\").reverse().join(\"-\");\n      },\n    },\n    {\n      text: \"Accept / Reject\",\n      dataField: \"\",\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n      formatter: function (cell, row) {\n        return (\n          <>\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-evenly\",\n                color: \"#6967ce\",\n                cursor: \"pointer\",\n              }}\n              id=\"div1\"\n            >\n              <div\n                id=\"accept\"\n                title=\"Accept Assignment\"\n                onClick={() => acceptHandler(row)}\n              >\n                <i\n                  class=\"fa fa-check\"\n                  style={{ color: \"green\", fontSize: \"16px\" }}\n                ></i>\n              </div>\n              <div\n                id=\"reject\"\n                title=\"Reject Assignment\"\n                // onClick={() => rejectHandler(row)}\n                onClick={() => rejectHandler(row)}\n              >\n                <i\n                  class=\"fa fa-times\"\n                  style={{ color: \"red\", fontSize: \"16px\" }}\n                ></i>\n              </div>\n            </div>\n          </>\n        );\n      },\n    },\n  ];\n\n  const acceptHandler = (key) => {\n    console.log(\"acceptHandler\", key);\n    setLoading(true)\n\n    let formData = new FormData();\n    formData.append(\"set\", 1);\n    formData.append(\"tlid\", JSON.parse(userid));\n    formData.append(\"assignment_id\", key.id);\n    formData.append(\"allocation_id\", key.allocation_id);\n\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/tl/AcceptRejectQuery`,\n      data: formData,\n    })\n      .then(function (response) {\n        console.log(\"response-\", response);\n        if (response.data.code === 1) {\n          setLoading(false)\n          Alerts.SuccessNormal(\"Query accepted successfully.\")\n          getPendingforAcceptance();\n          updateTab(1);\n        } else if (response.data.code === 0) {\n          setLoading(false)\n        }\n      })\n      .catch((error) => {\n        console.log(\"erroror - \", error);\n      });\n  };\n\n\n\n  return (\n    <>\n      <Card>\n        <CardHeader>\n          <TeamFilter\n            setData={setPendingData}\n            getData={getPendingforAcceptance}\n            pendingForAcceptence=\"pendingForAcceptence\"\n            setRecords={setRecords}\n            records={records}\n          />\n        </CardHeader>\n        <CardBody>\n          {\n            loading ?\n              <Spinner color=\"primary\" />\n              :\n              <BootstrapTable\n                bootstrap4\n                keyField=\"id\"\n                data={pendingData}\n                columns={columns}\n                rowIndex\n              />\n          }\n          <RejectedModal\n            rejectHandler={rejectHandler}\n            addPaymentModal={addPaymentModal}\n            pay={pay}\n            getPendingforAcceptance={getPendingforAcceptance}\n          />\n        </CardBody>\n      </Card>\n    </>\n  );\n}\n\nexport default PendingForAcceptence;\n\n"]},"metadata":{},"sourceType":"module"}
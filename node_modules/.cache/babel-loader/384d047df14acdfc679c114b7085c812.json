{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pooja/MazarsRepo/src/pages/TL/AssignmentTab/ViewAllReport.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from \"reactstrap\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport { baseUrl, ReportUrl } from \"../../../config/config\";\nimport * as yup from \"yup\";\nimport CommonServices from \"../../../common/common\";\nimport RejectedModal from \"./RejectModal\";\nimport Alerts from \"../../../common/Alerts\";\nimport Swal from \"sweetalert2\";\nimport DiscardReport from \"./DiscardReport\";\nconst Schema = yup.object().shape({\n  p_chat: yup.string().required(\"required discussion\")\n});\n\nfunction ViewReport({\n  reportModal,\n  ViewReport,\n  report,\n  dataItem\n}) {\n  _s();\n\n  const userId = window.localStorage.getItem(\"tlkey\");\n  const [data, setData] = useState([]);\n  const [docData, setDocData] = useState({});\n  const [nestedModal, setNestedModal] = useState(false);\n\n  const toggleNested = key => {\n    setNestedModal(!nestedModal);\n    setDocData(key);\n  };\n\n  const [ViewDiscussion, setViewDiscussion] = useState(false);\n\n  const ViewDiscussionToggel = key => {\n    setViewDiscussion(!ViewDiscussion); // setDocData(report)\n  }; //check\n\n\n  const toggleDiscard = id => {\n    Swal.fire({\n      title: \"Are you sure?\",\n      text: \"Do you want to discard ?\",\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes, discarded it!\"\n    }).then(result => {\n      if (result.value) {\n        deleteCliente(id);\n      }\n    });\n  };\n\n  const deleteCliente = id => {\n    let formData = new FormData();\n    formData.append(\"uid\", JSON.parse(userId));\n    formData.append(\"id\", dataItem.q_id);\n    formData.append(\"query_no\", dataItem.assign_no);\n    formData.append(\"type\", 2);\n    formData.append(\"docid\", id.docid);\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/tl/draftDiscussion`,\n      data: formData\n    }).then(function (response) {\n      console.log(\"response-\", response);\n\n      if (response.data.code === 1) {\n        getData();\n        Alerts.SuccessNormal(\"Discarded Successfully\");\n      }\n    }).catch(error => {\n      console.log(\"erroror - \", error);\n    });\n  };\n\n  useEffect(() => {\n    getData();\n  }, [report]);\n\n  const getData = () => {\n    let formData = new FormData();\n    formData.append(\"assign_no\", report);\n    formData.append(\"uid\", JSON.parse(userId));\n    formData.append(\"stages_type\", 2);\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/tl/getstagesinfo`,\n      data: formData\n    }).then(function (response) {\n      console.log(\"res-\", response);\n\n      if (response.data.code === 1) {\n        setData(response.data.result);\n      }\n    }).catch(error => {\n      console.log(\"erroror - \", error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: reportModal,\n      toggle: ViewReport,\n      size: \"lg\",\n      scrollable: true,\n      children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n        toggle: ViewReport,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            width: \"55vw\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"View All Reports\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn btn-success\",\n              onClick: () => ViewDiscussionToggel(),\n              children: \"View Discussion\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          class: \"table table-bordered\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"row\",\n                children: \"S.No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"row\",\n                children: \"Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"row\",\n                children: \"Document\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"row\",\n                children: \"Report Type\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"row\",\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this), data.length > 0 ? data.map((p, i) => /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: i + 1\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: CommonServices.removeTime(p.created_date)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: p.document && /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      display: \"flex\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                      href: `${ReportUrl}/${report}/${p.document}`,\n                      target: \"_blank\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        class: \"fa fa-photo\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 151,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      style: {\n                        marginLeft: \"15px\"\n                      },\n                      children: p.document\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 153,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 23\n                }, this), p.customer_files && /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                    href: `${ReportUrl}/${report}/${p.customer_files}`,\n                    target: \"_blank\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      class: \"fa fa-photo\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 23\n                  }, this), \" \\xA0 \\xA0 \\xA0\", p.customer_files]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 158,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"  \", p.stages_type == 2 && \"Draft Report\" || p.stages_type == 3 && \"Final Report\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 18\n                }, this), \"Review report  \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: p.stages_type == \"2\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: p.status == \"0\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      color: \"red\"\n                    },\n                    children: \"Pending\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 33\n                  }, this) : p.status == \"1\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      cursor: \"pointer\"\n                    },\n                    title: \"Customer Accepted\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      class: \"fa fa-check\",\n                      style: {\n                        color: \"blue\",\n                        fontSize: \"16px\",\n                        marginLeft: \"10px\"\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 35\n                  }, this) : p.status == \"2\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: \"flex\",\n                      justifyContent: \"space-around\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      title: \"Discussion\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        class: \"fa fa-comments-o\",\n                        style: {\n                          fontSize: 16,\n                          cursor: \"pointer\",\n                          marginLeft: \"8px\",\n                          color: \"green\"\n                        },\n                        onClick: () => toggleNested(p)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 196,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 39\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      title: \"Discard\",\n                      children: /*#__PURE__*/_jsxDEV(\"i\", {\n                        class: \"fa fa-times\",\n                        style: {\n                          fontSize: 16,\n                          cursor: \"pointer\",\n                          marginLeft: \"8px\",\n                          color: \"red\"\n                        },\n                        onClick: () => toggleDiscard(p)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 208,\n                        columnNumber: 41\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 39\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 37\n                  }, this) : p.status == \"3\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      color: \"red\"\n                    },\n                    children: \"Discarded\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 39\n                  }, this) : null\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 27\n                }, this) : null\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 17\n          }, this)) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RejectedModal, {\n      toggleNested: toggleNested,\n      nestedModal: nestedModal,\n      dataItem: dataItem,\n      docData: docData,\n      getData: getData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DiscardReport, {\n      ViewDiscussionToggel: ViewDiscussionToggel,\n      ViewDiscussion: ViewDiscussion,\n      report: report,\n      getData: getData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ViewReport, \"mp65e4XkyJ+g+uEUPKKGhU4cihQ=\");\n\n_c = ViewReport;\nexport default ViewReport;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewReport\");","map":{"version":3,"sources":["/home/pooja/MazarsRepo/src/pages/TL/AssignmentTab/ViewAllReport.js"],"names":["React","useState","useEffect","Modal","ModalHeader","ModalBody","ModalFooter","Button","useForm","axios","baseUrl","ReportUrl","yup","CommonServices","RejectedModal","Alerts","Swal","DiscardReport","Schema","object","shape","p_chat","string","required","ViewReport","reportModal","report","dataItem","userId","window","localStorage","getItem","data","setData","docData","setDocData","nestedModal","setNestedModal","toggleNested","key","ViewDiscussion","setViewDiscussion","ViewDiscussionToggel","toggleDiscard","id","fire","title","text","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","value","deleteCliente","formData","FormData","append","JSON","parse","q_id","assign_no","docid","method","url","response","console","log","code","getData","SuccessNormal","catch","error","display","justifyContent","width","length","map","p","i","removeTime","created_date","document","marginLeft","customer_files","stages_type","status","color","cursor","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button } from \"reactstrap\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport { baseUrl, ReportUrl } from \"../../../config/config\";\nimport * as yup from \"yup\";\nimport CommonServices from \"../../../common/common\";\nimport RejectedModal from \"./RejectModal\";\nimport Alerts from \"../../../common/Alerts\";\nimport Swal from \"sweetalert2\";\nimport DiscardReport from \"./DiscardReport\";\n\n\nconst Schema = yup.object().shape({\n  p_chat: yup.string().required(\"required discussion\"),\n});\n\nfunction ViewReport({\n  reportModal,\n  ViewReport,\n  report,\n  dataItem\n}) {\n  const userId = window.localStorage.getItem(\"tlkey\");\n  const [data, setData] = useState([]);\n  const [docData, setDocData] = useState({});\n\n\n  const [nestedModal, setNestedModal] = useState(false);\n  const toggleNested = (key) => {\n    setNestedModal(!nestedModal);\n    setDocData(key)\n  }\n\n  const [ViewDiscussion, setViewDiscussion] = useState(false);\n  const ViewDiscussionToggel = (key) => {\n    setViewDiscussion(!ViewDiscussion);\n    // setDocData(report)\n  }\n\n\n  //check\n  const toggleDiscard = (id) => {\n    Swal.fire({\n      title: \"Are you sure?\",\n      text: \"Do you want to discard ?\",\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes, discarded it!\",\n    }).then((result) => {\n      if (result.value) {\n        deleteCliente(id);\n      }\n    });\n  };\n\n  const deleteCliente = (id) => {\n    let formData = new FormData();\n    formData.append(\"uid\", JSON.parse(userId));\n    formData.append(\"id\", dataItem.q_id);\n    formData.append(\"query_no\", dataItem.assign_no);\n    formData.append(\"type\", 2);\n    formData.append(\"docid\", id.docid);\n\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/tl/draftDiscussion`,\n      data: formData,\n    })\n      .then(function (response) {\n        console.log(\"response-\", response);\n        if (response.data.code === 1) {\n          getData()\n          Alerts.SuccessNormal(\"Discarded Successfully\")\n        }\n      })\n      .catch((error) => {\n        console.log(\"erroror - \", error);\n      });\n  };\n\n\n  useEffect(() => {\n    getData();\n  }, [report]);\n\n  const getData = () => {\n    let formData = new FormData();\n    formData.append(\"assign_no\", report);\n    formData.append(\"uid\", JSON.parse(userId));\n    formData.append(\"stages_type\", 2);\n\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/tl/getstagesinfo`,\n      data: formData,\n    })\n      .then(function (response) {\n        console.log(\"res-\", response);\n        if (response.data.code === 1) {\n          setData(response.data.result)\n        }\n      })\n      .catch((error) => {\n        console.log(\"erroror - \", error);\n      });\n  }\n\n\n  return (\n    <div>\n      <Modal isOpen={reportModal} toggle={ViewReport} size=\"lg\" scrollable>\n        <ModalHeader toggle={ViewReport}>\n          <div style={{display:\"flex\",justifyContent:\"space-between\",width:\"55vw\"}}>\n            <span>View All Reports</span>\n            <span>\n              <button class=\"btn btn-success\" onClick={() => ViewDiscussionToggel()}>\n                View Discussion\n              </button>\n            </span>\n          </div>\n        </ModalHeader>\n        <ModalBody>\n          <table class=\"table table-bordered\">\n            <thead>\n              <tr>\n                <th scope=\"row\">S.No</th>\n                <th scope=\"row\">Date</th>\n                <th scope=\"row\">Document</th>\n                <th scope=\"row\">Report Type</th>\n                <th scope=\"row\">Action</th>\n              </tr>\n            </thead>\n\n            {data.length > 0\n              ? data.map((p, i) => (\n                <tbody>\n                  <tr>\n                    <td>{i + 1}</td>\n                    <td>{CommonServices.removeTime(p.created_date)}</td>\n                    <td>\n                      <tr>\n                      {p.document && (\n                        <p style={{ display: \"flex\" }}>\n                          <a\n                            href={`${ReportUrl}/${report}/${p.document}`}\n                            target=\"_blank\"\n                          >\n                            <i class=\"fa fa-photo\"></i>\n                          </a>\n                          <p style={{ marginLeft: \"15px\" }}>{p.document}</p>\n                        </p>\n                      )}\n                      </tr>\n                     {p.customer_files && \n                      <tr>\n                     \n                      <a\n                            href={`${ReportUrl}/${report}/${p.customer_files}`}\n                            target=\"_blank\"\n                          >\n                            <i class=\"fa fa-photo\"></i> \n                          </a> &nbsp; &nbsp; &nbsp;{p.customer_files}\n                    </tr> }\n                    </td>\n                  \n                    <td>\n                    <p>  {p.stages_type == 2 && \"Draft Report\" || p.stages_type == 3 && \"Final Report\"}</p>\n                 <br>\n                 </br> \n                 Review report  </td>\n                    <td>\n                      {\n                        p.stages_type == \"2\" ?\n                          <div>\n                            {\n                              p.status == \"0\" ?\n                                <p style={{ color: \"red\" }}>Pending</p>\n                                :\n                                p.status == \"1\" ?\n                                  <div style={{ cursor: \"pointer\" }} title=\"Customer Accepted\">\n                                    <i\n                                      class=\"fa fa-check\"\n                                      style={{\n                                        color: \"blue\",\n                                        fontSize: \"16px\",\n                                        marginLeft: \"10px\"\n                                      }}\n                                    ></i>\n                                  </div> :\n                                  p.status == \"2\" ?\n                                    <div style={{ display: \"flex\", justifyContent: \"space-around\" }}>\n                                      <div title=\"Discussion\">\n                                        <i\n                                          class=\"fa fa-comments-o\"\n                                          style={{\n                                            fontSize: 16,\n                                            cursor: \"pointer\",\n                                            marginLeft: \"8px\",\n                                            color: \"green\"\n                                          }}\n                                          onClick={() => toggleNested(p)}\n                                        ></i>\n                                      </div>\n                                      <div title=\"Discard\">\n                                        <i\n                                          class=\"fa fa-times\"\n                                          style={{\n                                            fontSize: 16,\n                                            cursor: \"pointer\",\n                                            marginLeft: \"8px\",\n                                            color: \"red\"\n                                          }}\n                                          onClick={() => toggleDiscard(p)}\n                                        ></i>\n                                      </div>\n                                    </div>\n                                    :\n                                    p.status == \"3\" ?\n                                      <p style={{ color: \"red\" }}>Discarded</p> :\n                                      null\n                            }\n                          </div>\n                          :\n                          null\n                      }\n                    </td>\n                  </tr>\n                </tbody>\n              ))\n              : null}\n          </table>\n        </ModalBody>\n      </Modal>\n\n      <RejectedModal\n        toggleNested={toggleNested}\n        nestedModal={nestedModal}\n        dataItem={dataItem}\n        docData={docData}\n        getData={getData}\n      />\n\n\n      <DiscardReport\n        ViewDiscussionToggel={ViewDiscussionToggel}\n        ViewDiscussion={ViewDiscussion}\n        report={report}\n        getData={getData}\n      />\n\n    </div>\n  );\n}\n\nexport default ViewReport;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pooja/MazarsRepo/src/pages/TL/CompleteData/CompleteData.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Card, CardHeader, CardBody, CardTitle, Row, Col, Table } from \"reactstrap\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { Link } from \"react-router-dom\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport TeamFilter from \"../../../components/Search-Filter/tlFilter\";\nimport History from \"../../../components/PendingForAllocation/History\";\nimport Swal from \"sweetalert2\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\nfunction CompletedQuery() {\n  _s();\n\n  const userid = window.localStorage.getItem(\"tlkey\");\n  const hist = useHistory();\n  const [incompleteData, setInCompleteData] = useState([]);\n  const [records, setRecords] = useState([]);\n  const [assignNo, setAssignNo] = useState('');\n  const [ViewDiscussion, setViewDiscussion] = useState(false);\n  const [history, setHistory] = useState([]);\n  const [modal, setModal] = useState(false); // const [records, setRecords] = useState([]);\n\n  const ViewDiscussionToggel = key => {\n    setViewDiscussion(!ViewDiscussion);\n    setAssignNo(key);\n  };\n\n  useEffect(() => {\n    getInCompleteAssingment();\n  }, []);\n\n  const toggle = key => {\n    console.log(\"key\", key);\n    setModal(!modal);\n    console.log(\"userid\", userid);\n    fetch(`${baseUrl}/customers/getQueryHistory?q_id=${key}&uid=${JSON.parse(userid)}`, {\n      method: \"GET\",\n      headers: new Headers({\n        Accept: \"application/vnd.github.cloak-preview\"\n      })\n    }).then(res => res.json()).then(response => {\n      console.log(response);\n      setHistory(response.result);\n    }).catch(error => console.log(error));\n  };\n\n  const getInCompleteAssingment = () => {\n    axios.get(`${baseUrl}/tl/pendingAllocation?uid=${JSON.parse(userid)}`).then(res => {\n      console.log(res);\n\n      if (res.data.code === 1) {\n        setInCompleteData(res.data.result);\n        setRecords(res.data.result.length);\n      }\n    });\n  };\n\n  const columns = [{\n    text: \"S.No\",\n    dataField: \"\",\n    formatter: (cellContent, row, rowIndex) => {\n      return rowIndex + 1;\n    },\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\",\n        width: \"50px\"\n      };\n    }\n  }, {\n    text: \"Date\",\n    dataField: \"created\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    }\n  }, {\n    text: \"Query No\",\n    dataField: \"assign_no\",\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function nameFormatter(cell, row) {\n      console.log(row);\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: {\n            pathname: `/teamleader/queries/${row.id}`,\n            index: 1,\n            routes: \"queriestab\"\n          },\n          children: row.assign_no\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this)\n      }, void 0, false);\n    }\n  }, {\n    text: \"Category\",\n    dataField: \"parent_id\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    }\n  }, {\n    text: \"Sub Category\",\n    dataField: \"cat_name\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    }\n  }, {\n    text: \"Customer Name\",\n    dataField: \"name\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    }\n  }, {\n    text: \"\tExp. Delivery Date\",\n    dataField: \"Exp_Delivery_Date\",\n    sort: true,\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function dateFormat(cell, row) {\n      console.log(\"dt\", row.Exp_Delivery_Date);\n      var oldDate = row.Exp_Delivery_Date;\n\n      if (oldDate == null) {\n        return null;\n      }\n\n      return oldDate.toString().split(\"-\").reverse().join(\"-\");\n    }\n  }, {\n    text: \"Status\",\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function nameFormatter(cell, row) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [row.status, \"/\", row.status == \"Inprogress Query\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"inprogress\",\n            children: row.statusdescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 31\n          }, this) : row.status == \"Declined Query\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"declined\",\n            children: row.statusdescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 35\n          }, this) : row.status == \"Completed Query\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"completed\",\n            children: row.statusdescription\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 39\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 19\n        }, this)\n      }, void 0, false);\n    }\n  }, //   {\n  //     text: \"Action\",\n  //     dataField: \"\",\n  //     headerStyle: () => {\n  //         return { fontSize: \"12px\" };\n  //     },\n  //     formatter: function (cell, row) {\n  //         console.log(\"StatusCode\", row)\n  //         return (\n  //             <>\n  //                 <div\n  //                     style={{\n  //                         display: \"flex\",\n  //                         justifyContent: \"space-evenly\",\n  //                         color: \"green\",\n  //                     }}\n  //                 >\n  //                     <Link to={`/teamleader/queryassing/${row.id}`}>\n  //                         {row.statuscode == \"1\" ? (\n  //                             <div title=\"Assigned\">\n  //                                 <i class=\"fa fa-share\" style={{ color: \"green\" }}></i>\n  //                             </div>\n  //                         ) :\n  //                             row.statuscode == \"2\" ?\n  //                                 (\n  //                                     <div title=\"Assign to\">\n  //                                         <i class=\"fa fa-share\"></i>\n  //                                     </div>\n  //                                 )\n  //                                 :\n  //                                 \"\"\n  //                         }\n  //                     </Link>\n  //                     <div title=\"Send Message\">\n  //                         <Link\n  //                             to={{\n  //                                 pathname: `/teamleader/chatting/${row.id}`,\n  //                                 obj: {\n  //                                     message_type: \"2\",\n  //                                     query_No: row.assign_no,\n  //                                     query_id: row.id,\n  //                                     routes: `/teamleader/proposal`\n  //                                 }\n  //                             }}\n  //                         >\n  //                             <i\n  //                                 class=\"fa fa-comments-o\"\n  //                                 style={{\n  //                                     fontSize: 16,\n  //                                     cursor: \"pointer\",\n  //                                     marginLeft: \"8px\",\n  //                                     color: \"blue\"\n  //                                 }}\n  //                             ></i>\n  //                         </Link>\n  //                     </div>\n  //                     <div title=\"View Discussion Message\">\n  //                         <i\n  //                             class=\"fa fa-comments-o\"\n  //                             style={{\n  //                                 fontSize: 16,\n  //                                 cursor: \"pointer\",\n  //                                 color: \"orange\"\n  //                             }}\n  //                             onClick={() => ViewDiscussionToggel(row.assign_no)}\n  //                         ></i>\n  //                     </div>\n  //                 </div>\n  //             </>\n  //         );\n  //     },\n  // },\n  {\n    text: \"Action\",\n    dataField: \"\",\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function (cell, row) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: row.statuscode === \"0\" || row.statuscode === \"3\" ? /*#__PURE__*/_jsxDEV(\"i\", {\n          onClick: () => assignConfirm(row.id, row.assign_no),\n          class: \"fa fa-share\",\n          style: {\n            color: \"blue\",\n            cursor: \"pointer\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 12\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"space-around\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: \"green\",\n              fontSize: \"10px\"\n            },\n            children: [\"Allocated to \", row.tname, \" on\", /*#__PURE__*/_jsxDEV(\"p\", {\n              children: row.allocation_time\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 1\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 3\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 13\n        }, this)\n      }, void 0, false);\n    }\n  }, {\n    text: \"History\",\n    dataField: \"\",\n    headerStyle: () => {\n      return {\n        fontSize: \"12px\"\n      };\n    },\n    formatter: function (cell, row) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          class: \"btn btn-info btn-sm\",\n          onClick: () => toggle(row.id),\n          children: \"History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this)\n      }, void 0, false);\n    }\n  }];\n\n  const assignConfirm = (id, assign_number) => {\n    console.log(\"id\", id);\n    Swal.fire({\n      title: \"Are you sure?\",\n      text: `do you want to assign ${assign_number} to taxprofessional`,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes, assign it!\"\n    }).then(result => {\n      if (result.value) {\n        console.log(result.value);\n        hist.push(`/teamleader/queryassing/${id}`);\n      } else {\n        console.log(\"no\");\n        axios.get(`${baseUrl}/tl/workby?uid=${JSON.parse(userid)}&qid=${id}`).then(res => {\n          if (res.data.code === 1) {\n            hist.push(`/teamleader/proposal`);\n          }\n        });\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: /*#__PURE__*/_jsxDEV(TeamFilter, {\n          setData: setInCompleteData,\n          getData: getInCompleteAssingment,\n          inCompleteQuery: \"inCompleteQuery\",\n          setRecords: setRecords,\n          records: records\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n        children: [/*#__PURE__*/_jsxDEV(BootstrapTable, {\n          bootstrap4: true,\n          keyField: \"id\",\n          data: incompleteData,\n          columns: columns,\n          rowIndex: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(History, {\n          history: history,\n          toggle: toggle,\n          modal: modal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(CompletedQuery, \"xNPbBP0F5K8qhZpQuLbs/p6G7lU=\", false, function () {\n  return [useHistory];\n});\n\n_c = CompletedQuery;\nexport default CompletedQuery;\n\nvar _c;\n\n$RefreshReg$(_c, \"CompletedQuery\");","map":{"version":3,"sources":["/home/pooja/MazarsRepo/src/pages/TL/CompleteData/CompleteData.js"],"names":["React","useState","useEffect","Card","CardHeader","CardBody","CardTitle","Row","Col","Table","axios","baseUrl","Link","BootstrapTable","TeamFilter","History","Swal","useParams","useHistory","CompletedQuery","userid","window","localStorage","getItem","hist","incompleteData","setInCompleteData","records","setRecords","assignNo","setAssignNo","ViewDiscussion","setViewDiscussion","history","setHistory","modal","setModal","ViewDiscussionToggel","key","getInCompleteAssingment","toggle","console","log","fetch","JSON","parse","method","headers","Headers","Accept","then","res","json","response","result","catch","error","get","data","code","length","columns","text","dataField","formatter","cellContent","row","rowIndex","headerStyle","fontSize","width","sort","nameFormatter","cell","pathname","id","index","routes","assign_no","dateFormat","Exp_Delivery_Date","oldDate","toString","split","reverse","join","status","statusdescription","statuscode","assignConfirm","color","cursor","display","justifyContent","tname","allocation_time","assign_number","fire","title","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","value","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  CardTitle,\n  Row,\n  Col,\n  Table,\n} from \"reactstrap\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { Link } from \"react-router-dom\";\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport TeamFilter from \"../../../components/Search-Filter/tlFilter\";\nimport History from \"../../../components/PendingForAllocation/History\";\nimport Swal from \"sweetalert2\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\nfunction CompletedQuery() {\n  const userid = window.localStorage.getItem(\"tlkey\");\nconst hist = useHistory();\n  const [incompleteData, setInCompleteData] = useState([]);\n  const [records, setRecords] = useState([]);\n \n  const [assignNo, setAssignNo] = useState('');\n  const [ViewDiscussion, setViewDiscussion] = useState(false);\n  const [history, setHistory] = useState([]);\n  const [modal, setModal] = useState(false);\n  // const [records, setRecords] = useState([]);\n  const ViewDiscussionToggel = (key) => {\n      setViewDiscussion(!ViewDiscussion);\n      setAssignNo(key)\n  }\n\n\n\n  useEffect(() => {\n    getInCompleteAssingment();\n  }, []);\n  const toggle = (key) => {\n    console.log(\"key\", key);\n    setModal(!modal);\n  console.log(\"userid\", userid)\n    fetch(`${baseUrl}/customers/getQueryHistory?q_id=${key}&uid=${JSON.parse(userid)}`, {\n      method: \"GET\",\n      headers: new Headers({\n        Accept: \"application/vnd.github.cloak-preview\",\n      }),\n    })\n      .then((res) => res.json())\n      .then((response) => {\n        console.log(response);\n        setHistory(response.result);\n      })\n      .catch((error) => console.log(error));\n  };\n  const getInCompleteAssingment = () => {\n    axios\n      .get(`${baseUrl}/tl/pendingAllocation?uid=${JSON.parse(userid)}`)\n      .then((res) => {\n        console.log(res);\n        if (res.data.code === 1) {\n          setInCompleteData(res.data.result);\n          setRecords(res.data.result.length);\n\n        }\n      });\n  };\n\n  const columns = [\n    {\n      text: \"S.No\",\n      dataField: \"\",\n      formatter: (cellContent, row, rowIndex) => {\n        return rowIndex + 1;\n      },\n      headerStyle: () => {\n        return { fontSize: \"12px\", width: \"50px\" };\n      },\n    },\n    {\n      text: \"Date\",\n      dataField: \"created\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n    },\n    {\n      text: \"Query No\",\n      dataField: \"assign_no\",\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n      formatter: function nameFormatter(cell, row) {\n        console.log(row);\n        return (\n          <>\n            <Link\n              to={{\n                pathname: `/teamleader/queries/${row.id}`,\n                index: 1,\n                routes: \"queriestab\",\n              }}\n            >\n              {row.assign_no}\n            </Link>\n          </>\n        );\n      },\n    },\n    {\n      text: \"Category\",\n      dataField: \"parent_id\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n    },\n    {\n      text: \"Sub Category\",\n      dataField: \"cat_name\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n    },\n    {\n      text: \"Customer Name\",\n      dataField: \"name\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n    },\n    {\n      text: \"\tExp. Delivery Date\",\n      dataField: \"Exp_Delivery_Date\",\n      sort: true,\n      headerStyle: () => {\n        return { fontSize: \"12px\" };\n      },\n      formatter: function dateFormat(cell, row) {\n        console.log(\"dt\", row.Exp_Delivery_Date);\n        var oldDate = row.Exp_Delivery_Date;\n        if (oldDate == null) {\n          return null;\n        }\n        return oldDate.toString().split(\"-\").reverse().join(\"-\");\n      },\n    },\n    {\n      text: \"Status\",\n      headerStyle: () => {\n          return { fontSize: \"12px\" };\n      },\n      formatter: function nameFormatter(cell, row) {\n          return (\n              <>\n                  <div>\n                      {row.status}/\n                      {\n                          row.status == \"Inprogress Query\" ?\n                              <p className=\"inprogress\">\n\n                                  {row.statusdescription}\n                              </p>\n                              :\n                              row.status == \"Declined Query\" ?\n                                  <p className=\"declined\">\n\n                                      {row.statusdescription}\n                                  </p> :\n                                  row.status == \"Completed Query\" ?\n                                      <p className=\"completed\">\n\n                                          {row.statusdescription}\n                                      </p> : \n                                      null\n                                  \n                                    \n                      }\n                  </div>\n              </>\n          );\n      },\n  },\n  //   {\n  //     text: \"Action\",\n  //     dataField: \"\",\n  //     headerStyle: () => {\n  //         return { fontSize: \"12px\" };\n  //     },\n  //     formatter: function (cell, row) {\n  //         console.log(\"StatusCode\", row)\n  //         return (\n  //             <>\n  //                 <div\n  //                     style={{\n  //                         display: \"flex\",\n  //                         justifyContent: \"space-evenly\",\n  //                         color: \"green\",\n  //                     }}\n  //                 >\n  //                     <Link to={`/teamleader/queryassing/${row.id}`}>\n  //                         {row.statuscode == \"1\" ? (\n  //                             <div title=\"Assigned\">\n  //                                 <i class=\"fa fa-share\" style={{ color: \"green\" }}></i>\n  //                             </div>\n  //                         ) :\n  //                             row.statuscode == \"2\" ?\n  //                                 (\n  //                                     <div title=\"Assign to\">\n  //                                         <i class=\"fa fa-share\"></i>\n  //                                     </div>\n  //                                 )\n  //                                 :\n  //                                 \"\"\n  //                         }\n  //                     </Link>\n\n  //                     <div title=\"Send Message\">\n  //                         <Link\n  //                             to={{\n  //                                 pathname: `/teamleader/chatting/${row.id}`,\n  //                                 obj: {\n  //                                     message_type: \"2\",\n  //                                     query_No: row.assign_no,\n  //                                     query_id: row.id,\n  //                                     routes: `/teamleader/proposal`\n  //                                 }\n  //                             }}\n  //                         >\n  //                             <i\n  //                                 class=\"fa fa-comments-o\"\n  //                                 style={{\n  //                                     fontSize: 16,\n  //                                     cursor: \"pointer\",\n  //                                     marginLeft: \"8px\",\n  //                                     color: \"blue\"\n  //                                 }}\n  //                             ></i>\n  //                         </Link>\n  //                     </div>\n\n  //                     <div title=\"View Discussion Message\">\n  //                         <i\n  //                             class=\"fa fa-comments-o\"\n  //                             style={{\n  //                                 fontSize: 16,\n  //                                 cursor: \"pointer\",\n  //                                 color: \"orange\"\n  //                             }}\n  //                             onClick={() => ViewDiscussionToggel(row.assign_no)}\n  //                         ></i>\n  //                     </div>\n  //                 </div>\n  //             </>\n  //         );\n  //     },\n  // },\n  {\n    text: \"Action\",\n    dataField: \"\",\n    headerStyle: () => {\n      return { fontSize: \"12px\" };\n    },\n    formatter: function (cell, row) {\n      return (\n        <>\n          {row.statuscode === \"0\" || row.statuscode === \"3\"? (\n           \n           <i onClick ={() => assignConfirm(row.id, row.assign_no)} class=\"fa fa-share\" style={{color : \"blue\", cursor : \"pointer\"}}></i>\n          ) : (\n            <div style={{ display: \"flex\", justifyContent: \"space-around\" }}>\n              {/* <div title=\"Assign to\">\n               \n\n              </div>\n              <div title=\"Decline Query\">\n                <Link\n                  to={`/teamleader/query_rejection/${row.id}`}\n                >\n                  <i\n                    className=\"fa fa-trash\"\n                  ></i>\n                </Link>\n              </div> */}\n  <p style={{ color: \"green\", fontSize: \"10px\" }}>\n\n Allocated to {row.tname} on\n<p>{row.allocation_time}</p>\n</p>\n              {/* <div title=\"Send Message\">\n                <Link\n                  to={{\n                    pathname: `/teamleader/chatting/${row.id}`,\n                    obj: {\n                      message_type: \"4\",\n                      query_No: row.assign_no,\n                      query_id: row.id,\n                      routes: `/teamleader/queriestab`\n                    }\n                  }}\n                >\n                  <i\n                    class=\"fa fa-comments-o\"\n                    style={{\n                      fontSize: 16,\n                      cursor: \"pointer\",\n                      marginLeft: \"8px\",\n                      color: \"blue\"\n                    }}\n                  ></i>\n                </Link>\n              </div> */}\n\n            </div>\n\n\n\n          )}\n        </>\n      );\n    },\n  },\n  {\n    text: \"History\",\n    dataField: \"\",\n    headerStyle: () => {\n      return { fontSize: \"12px\" };\n    },\n    formatter: function (cell, row) {\n      return (\n        <>\n          <button\n            type=\"button\"\n            class=\"btn btn-info btn-sm\"\n            onClick={() => toggle(row.id)}\n          >\n            History\n          </button>\n        </>\n      );\n    },\n  },\n  ];\n\n\n\n  const  assignConfirm = (id, assign_number) => {\n   console.log(\"id\", id)\n    Swal.fire({\n      title: \"Are you sure?\",\n      text: `do you want to assign ${assign_number} to taxprofessional`,\n      type: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Yes, assign it!\",\n    }).then((result) => {\n      if (result.value) {\n        console.log(result.value)\n       hist.push(`/teamleader/queryassing/${id}`)\n      }\n      else{\n        console.log(\"no\");\n        axios.get(`${baseUrl}/tl/workby?uid=${JSON.parse(userid)}&qid=${id}`).then((res) => {\n          if(res.data.code === 1){\n            hist.push(`/teamleader/proposal`)\n           \n          }\n        })\n      }\n    });\n  };\n\n  return (\n    <>\n      <Card>\n        <CardHeader>\n          <TeamFilter\n            setData={setInCompleteData}\n            getData={getInCompleteAssingment}\n            inCompleteQuery=\"inCompleteQuery\"\n            setRecords={setRecords}\n            records={records}\n          />\n        </CardHeader>\n        <CardBody>\n          <BootstrapTable\n            bootstrap4\n            keyField=\"id\"\n            data={incompleteData}\n            columns={columns}\n            rowIndex\n          />\n            <History history={history} toggle={toggle} modal={modal} />\n        </CardBody>\n      </Card>\n    </>\n  );\n}\n\nexport default CompletedQuery;\n"]},"metadata":{},"sourceType":"module"}
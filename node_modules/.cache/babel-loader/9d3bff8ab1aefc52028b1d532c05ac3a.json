{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pooja/MazarsRepo/src/pages/Admin/QueryAssingment/QueryAssingment.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Layout from \"../../../components/Layout/Layout\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { useParams, Link, Redirect } from \"react-router-dom\";\nimport { useAlert } from \"react-alert\";\nimport { Card, CardHeader, CardBody, CardTitle, Row, Col, Table, Tooltip } from \"reactstrap\";\nimport Alerts from \"../../../common/Alerts\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport classNames from \"classnames\";\nimport Mandatory from \"../../../components/Common/Mandatory\";\nimport Loader from \"../../../components/Loader/Loader\";\nconst Schema = yup.object().shape({\n  p_taxprof: yup.string().required(\"\"),\n  p_expdeldate: yup.string().required(\"\")\n});\n\nfunction QueryAssingment(props) {\n  _s();\n\n  const alert = useAlert();\n  const {\n    handleSubmit,\n    register,\n    errors,\n    reset\n  } = useForm({\n    resolver: yupResolver(Schema)\n  });\n  const {\n    id\n  } = useParams();\n  const [loading, setLoading] = useState(false);\n  const [taxLeaderDisplay, setTaxLeaderDisplay] = useState([]);\n  const [teamID, setTeamID] = useState(null);\n  const [teamName, setTeamName] = useState(\"\");\n  const [query, setQuery] = useState(true);\n  const [expectedDate, setExpectedDate] = useState(\"\");\n  const [hideQuery, setHideQuery] = useState({\n    name: \"\",\n    timeline: \"\",\n    date_allocation: \"\",\n    expdeliverydate: \"\"\n  });\n  const userId = window.localStorage.getItem(\"adminkey\");\n  const tlkey = window.localStorage.getItem(\"tlkey\");\n  const [queryData, setQuerData] = useState({\n    queryNo: \"\",\n    timelines: \"\",\n    custId: \"\"\n  });\n  const {\n    queryNo,\n    timelines,\n    custId\n  } = queryData;\n  var current_date = new Date().getFullYear() + '-' + (\"0\" + (new Date().getMonth() + 1)).slice(-2) + '-' + (\"0\" + new Date().getDate()).slice(-2);\n  console.log(\"current_date :\", current_date);\n  const [item] = useState(current_date);\n  useEffect(() => {\n    getTaxLeader();\n    getQueryData();\n  }, []);\n\n  const getTaxLeader = () => {\n    axios.get(`${baseUrl}/tl/getTeamLeader`).then(res => {\n      console.log(res);\n\n      if (res.data.code === 1) {\n        setTaxLeaderDisplay(res.data.result);\n      }\n    });\n  };\n\n  const getQueryData = () => {\n    axios.get(`${baseUrl}/tl/GetQueryDetails?id=${id}`).then(res => {\n      console.log(res);\n\n      if (res.data.code === 1) {\n        setQuerData({\n          queryNo: res.data.result[0].assign_no,\n          timelines: res.data.result[0].Timelines,\n          custId: res.data.result[0].customer_id\n        }); // expectedDeliveryDate(res.data.result[0].Timelines);\n      }\n    });\n  };\n\n  useEffect(() => {\n    getQuery();\n  }, [queryNo]);\n\n  const getQuery = () => {\n    axios.get(`${baseUrl}/tl/CheckIfAssigned?assignno=${queryNo}`).then(res => {\n      console.log(res);\n\n      if (res.data.code === 1) {\n        setQuery(false);\n        setHideQuery({\n          name: res.data.meta[0].name,\n          timeline: res.data.meta[0].timeline,\n          date_allocation: res.data.meta[0].date_allocation,\n          expdeliverydate: res.data.meta[0].expdeliverydate\n        });\n      }\n    });\n  };\n\n  const handleChange = e => {\n    console.log(\"val-\", e.target.value);\n    setTeamID(e.target.value);\n    var value = taxLeaderDisplay.filter(function (item) {\n      return item.id == e.target.value;\n    });\n    console.log(value[0].name);\n    setTeamName(value[0].name);\n  };\n\n  const onSubmit = value => {\n    setLoading(true);\n    console.log(\"value :\", value);\n    var expdeliverydate = value.p_expdeldate.replace(/(\\d\\d)\\/(\\d\\d)\\/(\\d{4})/, \"$3-$1-$2\");\n    let formData = new FormData();\n    formData.append(\"who\", teamID);\n    formData.append(\"id\", id);\n    formData.append(\"user\", JSON.parse(userId));\n    formData.append(\"type\", \"admin\");\n    formData.append(\"types\", \"tl\");\n    formData.append(\"name\", teamName);\n    formData.append(\"timeline\", value.p_timelines);\n    formData.append(\"expdeliverydate\", value.p_expdeldate);\n    formData.append(\"assignNo\", queryNo);\n    formData.append(\"customer_id\", custId);\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/tl/AddQueryAssignment`,\n      data: formData\n    }).then(function (response) {\n      console.log(\"res-\", response);\n\n      if (response.data.code === 1) {\n        setLoading(false);\n        var variable = \"Query assigned successfully.\";\n        Alerts.SuccessNormal(variable);\n        getQuery();\n        props.history.push({\n          pathname: `/admin/queriestab`,\n          index: 1\n        });\n      }\n\n      if (response.data.code === 0) {\n        setLoading(false);\n      }\n    }).catch(error => {\n      console.log(\"erroror - \", error);\n    });\n  };\n\n  const expectedDeliveryDate = key => {\n    console.log(\"timlines : \", key);\n    const d = new Date();\n\n    if (key == \"Urgent, (4-5 Working Days)\") {\n      const d2 = new Date(d.getTime() + 432000000);\n      const new_date = d2.getFullYear() + \"-\" + (d2.getMonth() + 1) + \"-\" + d2.getDate(); // d2.getDate() + \"/\" + (d2.getMonth() + 1) + \"/\" + d2.getFullYear();\n\n      console.log(\"Urgent:\", new_date);\n      setExpectedDate(new_date);\n    } else if (key == \"Regular (10-12 Working Days)\") {\n      const d2 = new Date(d.getTime() + 1296000000);\n      const new_date = d2.getFullYear() + \"-\" + (d2.getMonth() + 1) + \"-\" + d2.getDate();\n      console.log(\"regular:\", new_date);\n      setExpectedDate(new_date);\n    }\n  };\n\n  console.log(\"expectedDate\", expectedDate);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    adminDashboard: \"adminDashboard\",\n    adminUserId: userId,\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            md: \"4\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: {\n                pathname: `/admin/queriestab`,\n                index: 1\n              },\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                class: \"btn btn-success ml-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  class: \"fas fa-arrow-left mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 19\n                }, this), \"Go Back\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            md: \"4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: \"center\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"Query Allocation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardHeader, {\n        children: loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"row mt-3\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"col-md-12\",\n              children: [/*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: handleSubmit(onSubmit),\n                children: /*#__PURE__*/_jsxDEV(\"table\", {\n                  class: \"table\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \"Query No.\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 237,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: [\"Team Leaders\", /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"declined\",\n                          children: \"*\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 238,\n                          columnNumber: 57\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 238,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \"Expected Timeline\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 239,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: [\"Exp. Delivery Date\", /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"declined\",\n                          children: \"*\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 240,\n                          columnNumber: 63\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 240,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"col\",\n                        children: \"Action\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 241,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 236,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: query ? /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"row\",\n                        children: queryNo\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 247,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                          className: classNames(\"form-control\", {\n                            \"is-invalid\": errors.p_taxprof\n                          }),\n                          name: \"p_taxprof\",\n                          ref: register,\n                          onChange: e => handleChange(e),\n                          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                            value: \"\",\n                            children: \"-select-\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 257,\n                            columnNumber: 35\n                          }, this), taxLeaderDisplay.map((p, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                            value: p.id,\n                            children: p.name\n                          }, index, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 259,\n                            columnNumber: 37\n                          }, this))]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 249,\n                          columnNumber: 33\n                        }, this), errors.p_taxprof && /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"invalid-feedback\",\n                          children: errors.p_taxprof.message\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 265,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 248,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          ref: register,\n                          name: \"p_timelines\",\n                          value: timelines,\n                          class: \"form-control\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 272,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 271,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"date\",\n                          ref: register,\n                          name: \"p_expdeldate\",\n                          className: classNames(\"form-control\", {\n                            \"is-invalid\": errors.p_expdeldate\n                          }),\n                          min: item\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 281,\n                          columnNumber: 33\n                        }, this), errors.p_expdeldate && /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"invalid-feedback\",\n                          children: errors.p_expdeldate.message\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 291,\n                          columnNumber: 35\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 280,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"button\", {\n                          type: \"submit\",\n                          class: \"btn btn-success\",\n                          children: \"Assign\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 298,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 297,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 29\n                    }, this) : /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        scope: \"row\",\n                        children: queryNo\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 305,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"select\", {\n                          class: \"form-control w-75 p-0\",\n                          disabled: true,\n                          children: /*#__PURE__*/_jsxDEV(\"option\", {\n                            children: hideQuery.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 308,\n                            columnNumber: 35\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 307,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 306,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          ref: register,\n                          name: \"p_timelines\",\n                          class: \"form-control\",\n                          value: hideQuery.timeline,\n                          disabled: true\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 313,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 312,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          ref: register,\n                          name: \"p_expdeldate\",\n                          class: \"form-control\",\n                          value: hideQuery.expdeliverydate,\n                          disabled: true\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 323,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 322,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: /*#__PURE__*/_jsxDEV(\"button\", {\n                          class: \"btn btn-success\",\n                          disabled: true,\n                          children: \"Assigned\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 333,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 332,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 304,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Mandatory, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 17\n          }, this)\n        }, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n}\n\n_s(QueryAssingment, \"hI0ya/vOvhn7xaEjxoJP11qpl10=\", false, function () {\n  return [useAlert, useForm, useParams];\n});\n\n_c = QueryAssingment;\nexport default QueryAssingment;\n\nvar _c;\n\n$RefreshReg$(_c, \"QueryAssingment\");","map":{"version":3,"sources":["/home/pooja/MazarsRepo/src/pages/Admin/QueryAssingment/QueryAssingment.js"],"names":["React","useState","useEffect","Layout","useForm","axios","baseUrl","useParams","Link","Redirect","useAlert","Card","CardHeader","CardBody","CardTitle","Row","Col","Table","Tooltip","Alerts","yupResolver","yup","classNames","Mandatory","Loader","Schema","object","shape","p_taxprof","string","required","p_expdeldate","QueryAssingment","props","alert","handleSubmit","register","errors","reset","resolver","id","loading","setLoading","taxLeaderDisplay","setTaxLeaderDisplay","teamID","setTeamID","teamName","setTeamName","query","setQuery","expectedDate","setExpectedDate","hideQuery","setHideQuery","name","timeline","date_allocation","expdeliverydate","userId","window","localStorage","getItem","tlkey","queryData","setQuerData","queryNo","timelines","custId","current_date","Date","getFullYear","getMonth","slice","getDate","console","log","item","getTaxLeader","getQueryData","get","then","res","data","code","result","assign_no","Timelines","customer_id","getQuery","meta","handleChange","e","target","value","filter","onSubmit","replace","formData","FormData","append","JSON","parse","p_timelines","method","url","response","variable","SuccessNormal","history","push","pathname","index","catch","error","expectedDeliveryDate","key","d","d2","getTime","new_date","textAlign","map","p","message"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Layout from \"../../../components/Layout/Layout\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { useParams, Link, Redirect } from \"react-router-dom\";\nimport { useAlert } from \"react-alert\";\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  CardTitle,\n  Row,\n  Col,\n  Table,\n  Tooltip,\n} from \"reactstrap\";\nimport Alerts from \"../../../common/Alerts\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport classNames from \"classnames\";\nimport Mandatory from \"../../../components/Common/Mandatory\";\nimport Loader from \"../../../components/Loader/Loader\";\n\n\n\nconst Schema = yup.object().shape({\n  p_taxprof: yup.string().required(\"\"),\n  p_expdeldate: yup.string().required(\"\"),\n});\n\n\nfunction QueryAssingment(props) {\n  const alert = useAlert();\n  const { handleSubmit, register, errors, reset } = useForm({\n    resolver: yupResolver(Schema),\n  });\n  const { id } = useParams();\n\n  const [loading, setLoading] = useState(false);\n  const [taxLeaderDisplay, setTaxLeaderDisplay] = useState([]);\n  const [teamID, setTeamID] = useState(null);\n  const [teamName, setTeamName] = useState(\"\");\n  const [query, setQuery] = useState(true);\n\n  const [expectedDate, setExpectedDate] = useState(\"\");\n\n  const [hideQuery, setHideQuery] = useState({\n    name: \"\",\n    timeline: \"\",\n    date_allocation: \"\",\n    expdeliverydate: \"\",\n  });\n\n  const userId = window.localStorage.getItem(\"adminkey\");\n  const tlkey = window.localStorage.getItem(\"tlkey\");\n\n  const [queryData, setQuerData] = useState({\n    queryNo: \"\",\n    timelines: \"\",\n    custId: \"\",\n  });\n\n  const { queryNo, timelines, custId } = queryData;\n\n\n  var current_date = new Date().getFullYear() + '-' + (\"0\" + (new Date().getMonth() + 1)).slice(-2) + '-' + (\"0\" + new Date().getDate()).slice(-2)\n  console.log(\"current_date :\", current_date);\n  const [item] = useState(current_date);\n\n  useEffect(() => {\n    getTaxLeader();\n    getQueryData();\n  }, []);\n\n  const getTaxLeader = () => {\n    axios.get(`${baseUrl}/tl/getTeamLeader`).then((res) => {\n      console.log(res);\n      if (res.data.code === 1) {\n        setTaxLeaderDisplay(res.data.result);\n      }\n    });\n  };\n\n  const getQueryData = () => {\n    axios.get(`${baseUrl}/tl/GetQueryDetails?id=${id}`).then((res) => {\n      console.log(res);\n      if (res.data.code === 1) {\n        setQuerData({\n          queryNo: res.data.result[0].assign_no,\n          timelines: res.data.result[0].Timelines,\n          custId: res.data.result[0].customer_id,\n        });\n        // expectedDeliveryDate(res.data.result[0].Timelines);\n      }\n    });\n  };\n\n  useEffect(() => {\n    getQuery();\n  }, [queryNo]);\n\n  const getQuery = () => {\n    axios\n      .get(`${baseUrl}/tl/CheckIfAssigned?assignno=${queryNo}`)\n      .then((res) => {\n        console.log(res);\n        if (res.data.code === 1) {\n          setQuery(false);\n          setHideQuery({\n            name: res.data.meta[0].name,\n            timeline: res.data.meta[0].timeline,\n            date_allocation: res.data.meta[0].date_allocation,\n            expdeliverydate: res.data.meta[0].expdeliverydate,\n          });\n        }\n      });\n  };\n\n  const handleChange = (e) => {\n    console.log(\"val-\", e.target.value);\n    setTeamID(e.target.value);\n    var value = taxLeaderDisplay.filter(function (item) {\n      return item.id == e.target.value;\n    });\n    console.log(value[0].name);\n    setTeamName(value[0].name);\n  };\n\n  const onSubmit = (value) => {\n    setLoading(true)\n    console.log(\"value :\", value);\n    var expdeliverydate = value.p_expdeldate.replace(\n      /(\\d\\d)\\/(\\d\\d)\\/(\\d{4})/,\n      \"$3-$1-$2\"\n    );\n\n    let formData = new FormData();\n    formData.append(\"who\", teamID);\n    formData.append(\"id\", id);\n    formData.append(\"user\", JSON.parse(userId));\n    formData.append(\"type\", \"admin\");\n    formData.append(\"types\", \"tl\");\n    formData.append(\"name\", teamName);\n    formData.append(\"timeline\", value.p_timelines);\n    formData.append(\"expdeliverydate\", value.p_expdeldate);\n    formData.append(\"assignNo\", queryNo);\n    formData.append(\"customer_id\", custId);\n\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/tl/AddQueryAssignment`,\n      data: formData,\n    })\n      .then(function (response) {\n        console.log(\"res-\", response);\n        if (response.data.code === 1) {\n          setLoading(false)\n          var variable = \"Query assigned successfully.\"\n          Alerts.SuccessNormal(variable)\n          getQuery();\n          props.history.push({\n            pathname: `/admin/queriestab`,\n            index: 1,\n          });\n        } if (response.data.code === 0) {\n          setLoading(false)\n        }\n      })\n      .catch((error) => {\n        console.log(\"erroror - \", error);\n      });\n  };\n\n  const expectedDeliveryDate = (key) => {\n    console.log(\"timlines : \", key);\n\n    const d = new Date();\n\n    if (key == \"Urgent, (4-5 Working Days)\") {\n      const d2 = new Date(d.getTime() + 432000000);\n      const new_date =\n        d2.getFullYear() + \"-\" + (d2.getMonth() + 1) + \"-\" + d2.getDate();\n      // d2.getDate() + \"/\" + (d2.getMonth() + 1) + \"/\" + d2.getFullYear();\n\n      console.log(\"Urgent:\", new_date);\n      setExpectedDate(new_date);\n    } else if (key == \"Regular (10-12 Working Days)\") {\n      const d2 = new Date(d.getTime() + 1296000000);\n      const new_date =\n        d2.getFullYear() + \"-\" + (d2.getMonth() + 1) + \"-\" + d2.getDate();\n      console.log(\"regular:\", new_date);\n      setExpectedDate(new_date);\n    }\n  };\n\n  console.log(\"expectedDate\", expectedDate)\n\n  return (\n    <Layout adminDashboard=\"adminDashboard\" adminUserId={userId}>\n      <Card>\n        <CardHeader>\n          <Row>\n            <Col md=\"4\">\n              <Link\n                to={{\n                  pathname: `/admin/queriestab`,\n                  index: 1,\n                }}\n              >\n                <button class=\"btn btn-success ml-3\">\n                  <i class=\"fas fa-arrow-left mr-2\"></i>\n                  Go Back\n                </button>\n              </Link>\n            </Col>\n            <Col md=\"4\">\n              <div style={{ textAlign: \"center\" }}>\n                <h2>Query Allocation</h2>\n              </div>\n            </Col>\n          </Row>\n        </CardHeader>\n        <CardHeader>\n\n          {\n            loading ?\n              <Loader />\n              :\n              <>\n                <div class=\"row mt-3\">\n                  <div class=\"col-md-12\">\n                    <form onSubmit={handleSubmit(onSubmit)}>\n                      <table class=\"table\">\n                        <thead>\n                          <tr>\n                            <th scope=\"col\">Query No.</th>\n                            <th scope=\"col\">Team Leaders<span className=\"declined\">*</span></th>\n                            <th scope=\"col\">Expected Timeline</th>\n                            <th scope=\"col\">Exp. Delivery Date<span className=\"declined\">*</span></th>\n                            <th scope=\"col\">Action</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {query ? (\n                            <tr>\n                              <th scope=\"row\">{queryNo}</th>\n                              <td>\n                                <select\n                                  className={classNames(\"form-control\", {\n                                    \"is-invalid\": errors.p_taxprof,\n                                  })}\n                                  name=\"p_taxprof\"\n                                  ref={register}\n                                  onChange={(e) => handleChange(e)}\n                                >\n                                  <option value=\"\">-select-</option>\n                                  {taxLeaderDisplay.map((p, index) => (\n                                    <option key={index} value={p.id}>\n                                      {p.name}\n                                    </option>\n                                  ))}\n                                </select>\n                                {errors.p_taxprof && (\n                                  <div className=\"invalid-feedback\">\n                                    {errors.p_taxprof.message}\n                                  </div>\n                                )}\n                              </td>\n\n                              <td>\n                                <input\n                                  type=\"text\"\n                                  ref={register}\n                                  name=\"p_timelines\"\n                                  value={timelines}\n                                  class=\"form-control\"\n                                />\n                              </td>\n                              <td>\n                                <input\n                                  type=\"date\"\n                                  ref={register}\n                                  name=\"p_expdeldate\"\n                                  className={classNames(\"form-control\", {\n                                    \"is-invalid\": errors.p_expdeldate,\n                                  })}\n                                  min={item}\n                                />\n                                {errors.p_expdeldate && (\n                                  <div className=\"invalid-feedback\">\n                                    {errors.p_expdeldate.message}\n                                  </div>\n                                )}\n                              </td>\n\n                              <td>\n                                <button type=\"submit\" class=\"btn btn-success\">\n                                  Assign\n                                </button>\n                              </td>\n                            </tr>\n                          ) : (\n                            <tr>\n                              <th scope=\"row\">{queryNo}</th>\n                              <td>\n                                <select class=\"form-control w-75 p-0\" disabled>\n                                  <option>{hideQuery.name}</option>\n                                </select>\n                              </td>\n\n                              <td>\n                                <input\n                                  type=\"text\"\n                                  ref={register}\n                                  name=\"p_timelines\"\n                                  class=\"form-control\"\n                                  value={hideQuery.timeline}\n                                  disabled\n                                />\n                              </td>\n                              <td>\n                                <input\n                                  type=\"text\"\n                                  ref={register}\n                                  name=\"p_expdeldate\"\n                                  class=\"form-control\"\n                                  value={hideQuery.expdeliverydate}\n                                  disabled\n                                />\n                              </td>\n                              <td>\n                                <button class=\"btn btn-success\" disabled>\n                                  Assigned\n                                </button>\n                              </td>\n                            </tr>\n                          )}\n                        </tbody>\n                      </table>\n                    </form>\n                    <Mandatory />\n\n                  </div>\n                </div>\n              </>\n          }\n\n        </CardHeader>\n      </Card>\n    </Layout>\n  );\n}\n\nexport default QueryAssingment;\n"]},"metadata":{},"sourceType":"module"}
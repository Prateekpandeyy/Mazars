{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pooja/MazarsRepo/src/pages/TL/Schedule/Demo.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport axios from \"axios\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { baseUrl } from \"../../../config/config\";\nimport { ViewState, EditingState } from \"@devexpress/dx-react-scheduler\";\nimport { Scheduler, Resources, MonthView, Appointments, AppointmentTooltip, AppointmentForm, EditRecurrenceMenu, DragDropProvider, WeekView, DayView, DateNavigator, ViewSwitcher, TodayButton, Toolbar } from \"@devexpress/dx-react-scheduler-material-ui\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport * as Cookies from \"js-cookie\";\nimport Swal from \"sweetalert2\";\nimport Alerts from \"../../../common/Alerts\";\nimport Loader from \"../../../components/Loader/Loader\";\n\nfunction Demo() {\n  _s();\n\n  const userId = window.localStorage.getItem(\"tlkey\");\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState([]);\n  const [assignmentdata, setAssignmentData] = useState([]);\n  const [owner, setOwner] = useState([]);\n  const [read, setRead] = useState(false);\n  const [baseMode, SetbaseMode] = useState(\"avc\");\n  const [transcode, SetTranscode] = useState(\"interop\");\n  const [attendeeMode, SetAttendeeMode] = useState(\"video\");\n  const [videoProfile, SetVideoProfile] = useState(\"480p_4\");\n  var date = new Date();\n\n  function convert(str) {\n    var date = new Date(str),\n        mnth = (\"0\" + (date.getMonth() + 1)).slice(-2),\n        day = (\"0\" + date.getDate()).slice(-2);\n    return [date.getFullYear(), mnth, day].join(\"-\");\n  }\n\n  const [currentDate, setCurrentDate] = useState(convert(date));\n  useEffect(() => {\n    getData();\n    getAssignmentNo();\n    getUsers();\n  }, []);\n\n  const getData = () => {\n    axios.get(`${baseUrl}/tl/videoScheduler?tl_id=${JSON.parse(userId)}`).then(res => {\n      console.log(\"res -\", res);\n      var a = res.data.result.items;\n\n      if (a) {\n        setData(a.map(mapAppointmentData));\n      }\n    });\n  };\n\n  const mapAppointmentData = appointment => ({\n    id: appointment.id,\n    startDate: appointment.start,\n    endDate: appointment.end,\n    title: appointment.title,\n    notes: appointment.summary,\n    question_id: appointment.question_id,\n    vstart: appointment.vstart,\n    vend: appointment.vend,\n    user: appointment.user.split(','),\n    owner: appointment.owner,\n    username: appointment.username\n  });\n\n  const getAssignmentNo = () => {\n    axios.get(`${baseUrl}/admin/getAllQuery?uid=${JSON.parse(userId)}`).then(res => {\n      console.log(res);\n\n      if (res.data.code === 1) {\n        var data = res.data.result;\n        const newArrayOfObj = data.map(({\n          assign_no: text,\n          ...rest\n        }) => ({\n          text,\n          ...rest\n        }));\n        console.log(\"dt--\", newArrayOfObj);\n        setAssignmentData(newArrayOfObj);\n      }\n    });\n  };\n\n  const getUsers = () => {\n    axios.get(`${baseUrl}/tl/allAttendees?uid=${JSON.parse(userId)}`).then(res => {\n      console.log(res);\n\n      if (res.data.code === 1) {\n        var data = res.data.result;\n        const newOwners = data.map(({\n          name: text,\n          ...rest\n        }) => ({\n          text,\n          ...rest\n        }));\n        console.log(\"dt--\", newOwners);\n        setOwner(newOwners);\n      }\n    });\n  };\n\n  const resources = [{\n    fieldName: \"question_id\",\n    title: \"Query No\",\n    instances: assignmentdata\n  }, {\n    fieldName: \"user\",\n    title: \"Users\",\n    instances: owner,\n    allowMultiple: true\n  }];\n\n  const styles = theme => ({\n    button: {\n      color: theme.palette.background.default,\n      padding: 0\n    },\n    text: {\n      paddingTop: theme.spacing(1),\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\"\n    }\n  });\n\n  const B = key => {\n    setRead(!key);\n  };\n\n  const AppointmentBase = ({\n    children,\n    data,\n    onClick,\n    classes,\n    onAppointmentMetaChange,\n    ...restProps\n  }) => /*#__PURE__*/_jsxDEV(\"div\", {\n    onDoubleClick: () => B(data.owner),\n    children: /*#__PURE__*/_jsxDEV(Appointments.Appointment, { ...restProps,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\"\n        },\n        children: [console.log(\"data\", data), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: children\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => handleJoin(data),\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            class: \"fa fa-video-camera\",\n            style: {\n              fontSize: \"12px\",\n              color: \"#fff\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 12\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, this);\n\n  const Appointment = withStyles(styles, {\n    name: \"Appointment\"\n  })(AppointmentBase);\n\n  const myAppointment = props => {\n    return /*#__PURE__*/_jsxDEV(Appointment, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this);\n  }; //handleJoin\n\n\n  const handleJoin = data => {\n    // console.log(\"data\", data);\n    Cookies.set(\"channel_2\", data.question_id);\n    Cookies.set(\"baseMode_2\", baseMode);\n    Cookies.set(\"transcode_2\", transcode);\n    Cookies.set(\"attendeeMode_2\", attendeeMode);\n    Cookies.set(\"videoProfile_2\", videoProfile); // history.push(\"/teamleader/meeting/\");\n\n    history.push(`/teamleader/meeting/${data.id}`);\n  };\n\n  const changeFormat = d => {\n    console.log(\"d ---\", d);\n\n    if (typeof d === 'object') {\n      console.log(\"GMT\");\n      return d.getFullYear() + \"-\" + (d.getMonth() + 1) + \"-\" + d.getDate() + \" \" + d.toString().split(\" \")[4];\n    } else {\n      console.log(\"d\");\n      return d;\n    }\n  };\n\n  const commitChanges = ({\n    added,\n    changed,\n    deleted\n  }) => {\n    if (added) {\n      setLoading(true);\n      console.log(\"added - \", added);\n      var startDate = added.startDate;\n      var endDate = added.endDate;\n      let formData = new FormData();\n      formData.append(\"customer_id\", JSON.parse(userId));\n      formData.append(\"question_id\", added.question_id);\n      formData.append(\"time\", changeFormat(startDate));\n      formData.append(\"endtime\", changeFormat(endDate));\n      formData.append(\"title\", added.title);\n      formData.append(\"notes\", added.notes);\n      formData.append(\"user\", added.user);\n      axios({\n        method: \"POST\",\n        url: `${baseUrl}/tl/PostCallSchedule`,\n        data: formData\n      }).then(function (response) {\n        console.log(\"res post-\", response);\n\n        if (response.data.code === 1) {\n          setLoading(false);\n          Alerts.SuccessNormal(\"New call scheduled successfully.\");\n        } else if (response.data.code === 0) {\n          setLoading(false);\n          var msg = response.data.result;\n          Alerts.ErrorNormal(msg);\n        }\n\n        getData();\n      }).catch(error => {\n        console.log(\"erroror - \", error);\n      });\n    }\n\n    if (changed) {\n      console.log(\"changed\", changed);\n      setLoading(true);\n      const data2 = data.map(appointment => changed[appointment.id] ? { ...appointment,\n        ...changed[appointment.id]\n      } : appointment);\n      console.log(\"data2 - \", data2);\n      let valuesArray = Object.entries(changed);\n      let id = valuesArray[0][0];\n      console.log(\"id -\", id);\n      let dataIttem;\n\n      for (var i = 0; i < data2.length; i++) {\n        if (data2[i].id === id) {\n          dataIttem = data2[i];\n        }\n      }\n\n      console.log(\"owner\", dataIttem.owner);\n      var a = dataIttem.startDate;\n      var b = dataIttem.endDate;\n\n      if (!dataIttem.owner) {\n        var variable = \"Error\";\n        Alerts.ErrorEdit(variable);\n        return false;\n      }\n\n      let formData = new FormData();\n      formData.append(\"customer_id\", JSON.parse(userId));\n      formData.append(\"question_id\", dataIttem.question_id);\n      formData.append(\"id\", dataIttem.id);\n      formData.append(\"time\", changeFormat(a));\n      formData.append(\"endtime\", changeFormat(b));\n      formData.append(\"title\", dataIttem.title);\n      formData.append(\"notes\", dataIttem.notes);\n      formData.append(\"user\", dataIttem.user);\n      axios({\n        method: \"POST\",\n        url: `${baseUrl}/tl/PostCallSchedule`,\n        data: formData\n      }).then(function (response) {\n        console.log(\"res post-\", response);\n\n        if (response.data.code === 1) {\n          setLoading(false);\n          var msg = \"Call details updated successfully.\";\n          Alerts.SuccessNormal(msg);\n        } else if (response.data.code === 0) {\n          setLoading(false);\n          console.log(\"call 0 code\");\n          var msg = response.data.result;\n          Alerts.ErrorNormal(msg);\n        }\n\n        getData();\n      }).catch(error => {\n        console.log(\"erroror - \", error);\n      });\n    }\n\n    if (deleted !== undefined) {\n      console.log(\"deleted f\", deleted);\n      setLoading(true);\n      var value;\n      data.filter(data => {\n        if (data.id == deleted) {\n          console.log(\"owner\", data.owner);\n          value = data.owner;\n        }\n      }); // console.log(\"value\", value);\n\n      if (!value) {\n        var variable = \"Error\";\n        Alerts.ErrorDelete(variable);\n        return false;\n      }\n\n      Swal.fire({\n        title: \"Are you sure?\",\n        text: \"It will be permanently deleted !\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Yes, delete it!\"\n      }).then(result => {\n        if (result.value) {\n          axios.get(`${baseUrl}/tl/freeslot?id=${deleted}`).then(res => {\n            console.log(\"res -\", res);\n\n            if (res.data.code === 1) {\n              setLoading(false);\n              Swal.fire(\"Deleted!\", \"Scheduled call has been deleted.\", \"success\");\n              getData();\n            } else {\n              setLoading(false);\n              Swal.fire(\"Oops...\", \"Errorr \", \"error\");\n            }\n          });\n        }\n      });\n    }\n  };\n\n  const BooleanEditor = props => {\n    if (props.label === \"All Day\" || props.label === \"Repeat\") {\n      return null;\n    }\n\n    return /*#__PURE__*/_jsxDEV(AppointmentForm.BooleanEditor, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 12\n    }, this);\n  };\n\n  const TextEditor = props => {\n    return /*#__PURE__*/_jsxDEV(AppointmentForm.TextEditor, { ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 12\n    }, this);\n  }; //basic layout\n\n\n  const BasicLayout = ({\n    onFieldChange,\n    appointmentData,\n    ...restProps\n  }) => {\n    console.log(\"appointmentData\", appointmentData);\n    return /*#__PURE__*/_jsxDEV(AppointmentForm.BasicLayout, {\n      appointmentData: appointmentData,\n      onFieldChange: onFieldChange,\n      ...restProps,\n      children: [/*#__PURE__*/_jsxDEV(AppointmentForm.Label, {\n        text: \"All Participants\",\n        type: \"title\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AppointmentForm.TextEditor, {\n        value: appointmentData.username,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 7\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 11\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Paper, {\n        children: /*#__PURE__*/_jsxDEV(Scheduler, {\n          data: data,\n          height: 660,\n          children: [/*#__PURE__*/_jsxDEV(ViewState, {\n            defaultCurrentDate: currentDate,\n            defaultCurrentViewName: \"Week\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(EditingState, {\n            onCommitChanges: commitChanges\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(EditRecurrenceMenu, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(DayView, {\n            cellDuration: 60,\n            startDayHour: 0,\n            endDayHour: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(WeekView, {\n            cellDuration: 60,\n            startDayHour: 0,\n            endDayHour: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Appointments, {\n            appointmentComponent: myAppointment\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Toolbar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(DateNavigator, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(TodayButton, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ViewSwitcher, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(AppointmentTooltip, {\n            showOpenButton: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 17\n          }, this), read ? /*#__PURE__*/_jsxDEV(AppointmentForm, {\n            booleanEditorComponent: BooleanEditor,\n            basicLayoutComponent: BasicLayout,\n            textEditorComponent: TextEditor,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(AppointmentForm, {\n            booleanEditorComponent: BooleanEditor,\n            basicLayoutComponent: BasicLayout,\n            textEditorComponent: TextEditor\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Resources, {\n            data: resources\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 13\n      }, this)\n    }, void 0, false)\n  }, void 0, false);\n}\n\n_s(Demo, \"YlSt8ggM9l0FxO8EwugGYIya/RI=\", false, function () {\n  return [useHistory];\n});\n\n_c = Demo;\nexport default Demo;\n\nvar _c;\n\n$RefreshReg$(_c, \"Demo\");","map":{"version":3,"sources":["/home/pooja/MazarsRepo/src/pages/TL/Schedule/Demo.js"],"names":["React","useState","useEffect","Paper","axios","Link","useHistory","baseUrl","ViewState","EditingState","Scheduler","Resources","MonthView","Appointments","AppointmentTooltip","AppointmentForm","EditRecurrenceMenu","DragDropProvider","WeekView","DayView","DateNavigator","ViewSwitcher","TodayButton","Toolbar","withStyles","Cookies","Swal","Alerts","Loader","Demo","userId","window","localStorage","getItem","history","loading","setLoading","data","setData","assignmentdata","setAssignmentData","owner","setOwner","read","setRead","baseMode","SetbaseMode","transcode","SetTranscode","attendeeMode","SetAttendeeMode","videoProfile","SetVideoProfile","date","Date","convert","str","mnth","getMonth","slice","day","getDate","getFullYear","join","currentDate","setCurrentDate","getData","getAssignmentNo","getUsers","get","JSON","parse","then","res","console","log","a","result","items","map","mapAppointmentData","appointment","id","startDate","start","endDate","end","title","notes","summary","question_id","vstart","vend","user","split","username","code","newArrayOfObj","assign_no","text","rest","newOwners","name","resources","fieldName","instances","allowMultiple","styles","theme","button","color","palette","background","default","padding","paddingTop","spacing","overflow","textOverflow","whiteSpace","B","key","AppointmentBase","children","onClick","classes","onAppointmentMetaChange","restProps","display","handleJoin","fontSize","Appointment","myAppointment","props","set","push","changeFormat","d","toString","commitChanges","added","changed","deleted","formData","FormData","append","method","url","response","SuccessNormal","msg","ErrorNormal","catch","error","data2","valuesArray","Object","entries","dataIttem","i","length","b","variable","ErrorEdit","undefined","value","filter","ErrorDelete","fire","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","BooleanEditor","label","TextEditor","BasicLayout","onFieldChange","appointmentData"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Paper from \"@material-ui/core/Paper\";\nimport axios from \"axios\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { baseUrl } from \"../../../config/config\";\nimport { ViewState, EditingState } from \"@devexpress/dx-react-scheduler\";\nimport {\n  Scheduler,\n  Resources,\n  MonthView,\n  Appointments,\n  AppointmentTooltip,\n  AppointmentForm,\n  EditRecurrenceMenu,\n  DragDropProvider,\n  WeekView,\n  DayView,\n  DateNavigator,\n  ViewSwitcher,\n  TodayButton,\n  Toolbar,\n} from \"@devexpress/dx-react-scheduler-material-ui\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport * as Cookies from \"js-cookie\";\nimport Swal from \"sweetalert2\";\nimport Alerts from \"../../../common/Alerts\";\nimport Loader from \"../../../components/Loader/Loader\";\n\n\n\nfunction Demo() {\n  const userId = window.localStorage.getItem(\"tlkey\");\n  const history = useHistory();\n\n  const [loading, setLoading] = useState(false);\n  const [data, setData] = useState([]);\n  const [assignmentdata, setAssignmentData] = useState([]);\n  const [owner, setOwner] = useState([]);\n  const [read, setRead] = useState(false);\n\n  const [baseMode, SetbaseMode] = useState(\"avc\");\n  const [transcode, SetTranscode] = useState(\"interop\");\n  const [attendeeMode, SetAttendeeMode] = useState(\"video\");\n  const [videoProfile, SetVideoProfile] = useState(\"480p_4\");\n  var date = new Date();\n\n  function convert(str) {\n    var date = new Date(str),\n      mnth = (\"0\" + (date.getMonth() + 1)).slice(-2),\n      day = (\"0\" + date.getDate()).slice(-2);\n    return [date.getFullYear(), mnth, day].join(\"-\");\n  }\n  const [currentDate, setCurrentDate] = useState(convert(date));\n\n  useEffect(() => {\n    getData();\n    getAssignmentNo();\n    getUsers();\n  }, []);\n\n  const getData = () => {\n    axios\n      .get(`${baseUrl}/tl/videoScheduler?tl_id=${JSON.parse(userId)}`)\n      .then((res) => {\n        console.log(\"res -\", res);\n        var a = res.data.result.items;\n        if (a) {\n          setData(a.map(mapAppointmentData));\n        }\n      });\n  };\n\n  const mapAppointmentData = (appointment) => ({\n    id: appointment.id,\n    startDate: appointment.start,\n    endDate: appointment.end,\n    title: appointment.title,\n    notes: appointment.summary,\n    question_id: appointment.question_id,\n    vstart: appointment.vstart,\n    vend: appointment.vend,\n    user: appointment.user.split(','),\n    owner: appointment.owner,\n    username: appointment.username,\n  });\n\n  const getAssignmentNo = () => {\n    axios\n      .get(`${baseUrl}/admin/getAllQuery?uid=${JSON.parse(userId)}`)\n      .then((res) => {\n        console.log(res);\n        if (res.data.code === 1) {\n          var data = res.data.result;\n\n          const newArrayOfObj = data.map(({ assign_no: text, ...rest }) => ({\n            text,\n            ...rest,\n          }));\n          console.log(\"dt--\", newArrayOfObj);\n          setAssignmentData(newArrayOfObj);\n        }\n      });\n  };\n\n  const getUsers = () => {\n    axios.get(`${baseUrl}/tl/allAttendees?uid=${JSON.parse(userId)}`).then((res) => {\n      console.log(res);\n      if (res.data.code === 1) {\n        var data = res.data.result;\n        const newOwners = data.map(({ name: text, ...rest }) => ({\n          text,\n          ...rest,\n        }));\n        console.log(\"dt--\", newOwners);\n        setOwner(newOwners);\n      }\n    });\n  };\n\n  const resources = [\n    {\n      fieldName: \"question_id\",\n      title: \"Query No\",\n      instances: assignmentdata,\n    },\n    {\n      fieldName: \"user\",\n      title: \"Users\",\n      instances: owner,\n      allowMultiple: true,\n    },\n  ];\n\n  const styles = (theme) => ({\n    button: {\n      color: theme.palette.background.default,\n      padding: 0,\n    },\n    text: {\n      paddingTop: theme.spacing(1),\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\",\n    },\n  });\n\n\n  const B = (key) => {\n    setRead(!key)\n  }\n\n  const AppointmentBase = ({\n    children,\n    data,\n    onClick,\n    classes,\n    onAppointmentMetaChange,\n    ...restProps\n  }) => (\n    <div onDoubleClick={() => B(data.owner)}>\n      <Appointments.Appointment {...restProps}>\n        <div style={{ display: \"flex\" }}>\n          {\n            console.log(\"data\", data)\n          }\n          <div>{children}</div>\n          \n          <div\n            onClick={() => handleJoin(data)}\n          ><i\n            class=\"fa fa-video-camera\"\n            style={{ fontSize: \"12px\", color: \"#fff\" }}\n          ></i>\n          </div>\n        </div>\n      </Appointments.Appointment>\n    </div>\n  );\n\n  \n\n  const Appointment = withStyles(styles, { name: \"Appointment\" })(\n    AppointmentBase\n  );\n\n  const myAppointment = (props) => {\n    return (\n      <Appointment\n        {...props}\n      // onAppointmentMetaChange={onAppointmentMetaChange}\n      />\n    );\n  };\n\n\n  //handleJoin\n  const handleJoin = (data) => {\n    // console.log(\"data\", data);\n\n    Cookies.set(\"channel_2\", data.question_id);\n    Cookies.set(\"baseMode_2\", baseMode);\n    Cookies.set(\"transcode_2\", transcode);\n    Cookies.set(\"attendeeMode_2\", attendeeMode);\n    Cookies.set(\"videoProfile_2\", videoProfile);\n    // history.push(\"/teamleader/meeting/\");\n    history.push(`/teamleader/meeting/${data.id}`);\n\n  };\n\n  const changeFormat = (d) => {\n    console.log(\"d ---\", d);\n\n    if (typeof d === 'object') {\n      console.log(\"GMT\");\n      return (\n        d.getFullYear() +\n        \"-\" +\n        (d.getMonth() + 1) +\n        \"-\" +\n        d.getDate() +\n        \" \" +\n        d.toString().split(\" \")[4]\n      );\n    } else {\n      console.log(\"d\");\n      return d;\n    }\n  };\n\n  const commitChanges = ({ added, changed, deleted }) => {\n\n    if (added) {\n      setLoading(true)\n      console.log(\"added - \", added);\n\n      var startDate = added.startDate;\n      var endDate = added.endDate;\n\n      let formData = new FormData();\n      formData.append(\"customer_id\", JSON.parse(userId));\n      formData.append(\"question_id\", added.question_id);\n      formData.append(\"time\", changeFormat(startDate));\n      formData.append(\"endtime\", changeFormat(endDate));\n      formData.append(\"title\", added.title);\n      formData.append(\"notes\", added.notes);\n      formData.append(\"user\", added.user);\n\n      axios({\n        method: \"POST\",\n        url: `${baseUrl}/tl/PostCallSchedule`,\n        data: formData,\n      })\n        .then(function (response) {\n          console.log(\"res post-\", response);\n          if (response.data.code === 1) {\n            setLoading(false)\n            Alerts.SuccessNormal(\"New call scheduled successfully.\")\n          } else if (response.data.code === 0) {\n            setLoading(false)\n            var msg = response.data.result\n            Alerts.ErrorNormal(msg)\n          }\n\n          getData();\n        })\n        .catch((error) => {\n          console.log(\"erroror - \", error);\n        });\n    }\n    if (changed) {\n      console.log(\"changed\", changed);\n      setLoading(true)\n      const data2 = data.map((appointment) =>\n        changed[appointment.id]\n          ? { ...appointment, ...changed[appointment.id] }\n          : appointment\n      );\n      console.log(\"data2 - \", data2);\n\n      let valuesArray = Object.entries(changed);\n      let id = valuesArray[0][0];\n      console.log(\"id -\", id);\n      let dataIttem;\n\n      for (var i = 0; i < data2.length; i++) {\n        if (data2[i].id === id) {\n          dataIttem = data2[i];\n        }\n      }\n      console.log(\"owner\", dataIttem.owner);\n\n      var a = dataIttem.startDate\n      var b = dataIttem.endDate\n\n\n      if (!dataIttem.owner) {\n        var variable = \"Error\"\n        Alerts.ErrorEdit(variable)\n        return false;\n      }\n      let formData = new FormData();\n      formData.append(\"customer_id\", JSON.parse(userId));\n      formData.append(\"question_id\", dataIttem.question_id);\n      formData.append(\"id\", dataIttem.id);\n      formData.append(\"time\", changeFormat(a));\n      formData.append(\"endtime\", changeFormat(b));\n      formData.append(\"title\", dataIttem.title);\n      formData.append(\"notes\", dataIttem.notes);\n      formData.append(\"user\", dataIttem.user);\n\n      axios({\n        method: \"POST\",\n        url: `${baseUrl}/tl/PostCallSchedule`,\n        data: formData,\n      })\n        .then(function (response) {\n          console.log(\"res post-\", response);\n\n          if (response.data.code === 1) {\n            setLoading(false)\n            var msg = \"Call details updated successfully.\"\n            Alerts.SuccessNormal(msg)\n          }\n          else if (response.data.code === 0) {\n            setLoading(false)\n            console.log(\"call 0 code\")\n            var msg = response.data.result\n            Alerts.ErrorNormal(msg)\n          }\n          getData();\n        })\n        .catch((error) => {\n          console.log(\"erroror - \", error);\n        });\n    }\n\n    if (deleted !== undefined) {\n      console.log(\"deleted f\", deleted);\n      setLoading(true)\n      var value;\n      data.filter((data) => {\n        if (data.id == deleted) {\n          console.log(\"owner\", data.owner);\n          value = data.owner\n        }\n      });\n\n      // console.log(\"value\", value);\n      if (!value) {\n        var variable = \"Error\"\n        Alerts.ErrorDelete(variable)\n        return false;\n      }\n\n      Swal.fire({\n        title: \"Are you sure?\",\n        text: \"It will be permanently deleted !\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonColor: \"#3085d6\",\n        cancelButtonColor: \"#d33\",\n        confirmButtonText: \"Yes, delete it!\",\n      }).then((result) => {\n        if (result.value) {\n          axios.get(`${baseUrl}/tl/freeslot?id=${deleted}`).then((res) => {\n            console.log(\"res -\", res);\n            if (res.data.code === 1) {\n              setLoading(false)\n              Swal.fire(\"Deleted!\", \"Scheduled call has been deleted.\", \"success\");\n              getData();\n            } else {\n              setLoading(false)\n              Swal.fire(\"Oops...\", \"Errorr \", \"error\");\n            }\n          });\n        }\n      });\n    }\n  };\n\n\n  const BooleanEditor = (props) => {\n    if (props.label === \"All Day\" || props.label === \"Repeat\") {\n      return null;\n    }\n    return <AppointmentForm.BooleanEditor {...props} />;\n  };\n\n  const TextEditor = (props) => {\n    return <AppointmentForm.TextEditor {...props} />;\n  };\n\n  //basic layout\n  const BasicLayout = ({ onFieldChange, appointmentData, ...restProps }) => {\n    console.log(\"appointmentData\", appointmentData);\n    return (\n      <AppointmentForm.BasicLayout\n        appointmentData={appointmentData}\n        onFieldChange={onFieldChange}\n        {...restProps}\n      >\n\n        <AppointmentForm.Label text=\"All Participants\" type=\"title\" />\n        <AppointmentForm.TextEditor\n          value={appointmentData.username}\n          readOnly\n        />\n\n      </AppointmentForm.BasicLayout>\n    );\n  };\n\n\n  return (\n    <>\n      {\n        loading ?\n          <Loader />\n          :\n          <>\n            <Paper>\n              <Scheduler data={data} height={660}>\n                <ViewState\n                  defaultCurrentDate={currentDate}\n                  defaultCurrentViewName=\"Week\"\n                />\n                <EditingState onCommitChanges={commitChanges} />\n                <EditRecurrenceMenu />\n\n                <DayView cellDuration={60} startDayHour={0} endDayHour={24} />\n                <WeekView cellDuration={60} startDayHour={0} endDayHour={24}  />\n                \n                <Appointments appointmentComponent={myAppointment} />\n\n                <Toolbar />\n                <DateNavigator />\n                <TodayButton />\n                <ViewSwitcher />\n\n                <AppointmentTooltip showOpenButton />\n\n                {\n                  read ?\n                    <AppointmentForm\n                      booleanEditorComponent={BooleanEditor}\n                      basicLayoutComponent={BasicLayout}\n                      textEditorComponent={TextEditor}\n                      readOnly\n                    />\n                    :\n                    <AppointmentForm\n                      booleanEditorComponent={BooleanEditor}\n                      basicLayoutComponent={BasicLayout}\n                      textEditorComponent={TextEditor}\n                    />\n                }\n\n                <Resources\n                  data={resources}\n                />\n              </Scheduler>\n            </Paper>\n          </>\n      }\n    </>\n  );\n}\n\nexport default Demo;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/pooja/MazarsRepo/src/pages/TP/Login/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Header from \"../../../components/Header/Header\";\nimport Footer from \"../../../components/Footer/Footer\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { useAlert } from \"react-alert\";\nimport classNames from \"classnames\";\nimport Swal from \"sweetalert2\";\nimport { Link } from \"react-router-dom\";\nimport Alerts from \"../../../common/Alerts\";\nimport Mandatory from \"../../../components/Common/Mandatory\";\nimport VerifyOtpLogin from \"./VerifyOtpLogin\";\nimport { Spinner } from \"reactstrap\";\nconst Schema = yup.object().shape({\n  p_email: yup.string().email(\"invalid email\").required(\"required email\"),\n  password: yup.string().required(\"required password\").min(5, \"at least 5 digits\").max(20, \"max 20 digits\")\n});\n\nfunction Login(props) {\n  _s();\n\n  const alert = useAlert();\n  const {\n    handleSubmit,\n    register,\n    reset,\n    errors\n  } = useForm({\n    resolver: yupResolver(Schema)\n  });\n  const [email, setEmail] = useState(null);\n  const [show, setShow] = useState(false);\n  const [uid, setUid] = useState('');\n  const [isPasswordShow, setPasswordShow] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const togglePasssword = () => {\n    setPasswordShow(!isPasswordShow);\n  };\n\n  const onSubmit = value => {\n    console.log(\"value :\", value);\n    setLoading(true);\n    let formData = new FormData();\n    formData.append(\"id\", value.p_email);\n    formData.append(\"password\", value.password);\n    formData.append(\"type\", \"tp\");\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/tp/login`,\n      data: formData\n    }).then(function (response) {\n      console.log(\"res-\", response);\n\n      if (response.data.code === 1) {\n        setLoading(false);\n        setShow(true);\n        Swal.fire({\n          \"title\": \"success\",\n          \"html\": \"As per your request, OTP has been sent to your registered email address.\",\n          \"icon\": \"success\"\n        }); // Alerts.SuccessNormal(\"As per your request, OTP has been sent to your registered email address.\")\n\n        setUid(response.data[\"user id\"]);\n      } else if (response.data.code === 0) {\n        setLoading(false);\n        Alerts.ErrorNormal(\"Invalid email or password.\");\n      }\n    }).catch(error => {\n      console.log(\"erroror - \", error);\n    });\n  };\n\n  const handleChange = e => {\n    console.log(\"val-\", e.target.value);\n    setEmail(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      mtp: \"mtp\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"container\",\n      children: show ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(VerifyOtpLogin, {\n          email: email,\n          uid: uid,\n          loading: loading,\n          setLoading: setLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 18\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"heading\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"TAX PROFESSIONAL LOGIN\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-label\",\n                  children: [\"Email\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"declined\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 58\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  className: classNames(\"form-control\", {\n                    \"is-invalid\": errors.p_email\n                  }),\n                  name: \"p_email\",\n                  ref: register,\n                  placeholder: \"Enter Email\",\n                  autocomplete: \"off\",\n                  onChange: e => handleChange(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 23\n                }, this), errors.p_email && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"invalid-feedback\",\n                  children: errors.p_email.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  className: \"form-label\",\n                  children: [\"Password\", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"declined\",\n                    children: \"*\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 61\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: isPasswordShow ? \"text\" : \"password\",\n                  className: classNames(\"form-control\", {\n                    \"is-invalid\": errors.password\n                  }),\n                  name: \"password\",\n                  placeholder: \"Enter Password\",\n                  ref: register\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: `fa ${isPasswordShow ? \"fa-eye-slash\" : \"fa-eye\"} password-icon`,\n                  onClick: togglePasssword\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 23\n                }, this), errors.password && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"invalid-feedback\",\n                  children: errors.password.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"col-md-12\",\n            children: /*#__PURE__*/_jsxDEV(Spinner, {\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 21\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              flexDirection: \"row-reverse\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: {\n                pathname: \"/taxprofessional/forget-password\",\n                email: `${email}`\n              },\n              children: \"Forgot Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Mandatory, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Login, \"byV2PiFyjeK/v+7PYZw9xA6IRQg=\", false, function () {\n  return [useAlert, useForm];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/pooja/MazarsRepo/src/pages/TP/Login/Login.js"],"names":["React","useState","Header","Footer","yupResolver","yup","useForm","axios","baseUrl","useAlert","classNames","Swal","Link","Alerts","Mandatory","VerifyOtpLogin","Spinner","Schema","object","shape","p_email","string","email","required","password","min","max","Login","props","alert","handleSubmit","register","reset","errors","resolver","setEmail","show","setShow","uid","setUid","isPasswordShow","setPasswordShow","loading","setLoading","togglePasssword","onSubmit","value","console","log","formData","FormData","append","method","url","data","then","response","code","fire","ErrorNormal","catch","error","handleChange","e","target","message","display","flexDirection","pathname"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Header from \"../../../components/Header/Header\";\nimport Footer from \"../../../components/Footer/Footer\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../config/config\";\nimport { useAlert } from \"react-alert\";\nimport classNames from \"classnames\";\nimport Swal from \"sweetalert2\";\nimport { Link } from \"react-router-dom\";\nimport Alerts from \"../../../common/Alerts\";\nimport Mandatory from \"../../../components/Common/Mandatory\";\nimport VerifyOtpLogin from \"./VerifyOtpLogin\";\nimport { Spinner } from \"reactstrap\";\n\nconst Schema = yup.object().shape({\n  p_email: yup.string().email(\"invalid email\").required(\"required email\"),\n  password: yup\n    .string()\n    .required(\"required password\")\n    .min(5, \"at least 5 digits\")\n    .max(20, \"max 20 digits\"),\n});\n\nfunction Login(props) {\n  const alert = useAlert();\n  const { handleSubmit, register, reset, errors } = useForm({\n    resolver: yupResolver(Schema),\n  });\n  const [email, setEmail] = useState(null);\n  const [show, setShow] = useState(false);\n  const [uid, setUid] = useState('')\n  const [isPasswordShow, setPasswordShow] = useState(false);\n  const [loading, setLoading] = useState(false);\n \n  const togglePasssword = () => {\n    setPasswordShow(!isPasswordShow)\n  };\n\n  const onSubmit = (value) => {\n    console.log(\"value :\", value);\n    setLoading(true)\n\n    let formData = new FormData();\n    formData.append(\"id\", value.p_email);\n    formData.append(\"password\", value.password);\n    formData.append(\"type\", \"tp\");\n    axios({\n      method: \"POST\",\n      url: `${baseUrl}/tp/login`,\n      data: formData,\n    })\n      .then(function (response) {\n        console.log(\"res-\", response);\n        if (response.data.code === 1) {\n          setLoading(false)\n          setShow(true)\n          Swal.fire({\n            \"title\" : \"success\", \n            \"html\" : \"As per your request, OTP has been sent to your registered email address.\",\n            \"icon\" : \"success\"\n          })\n          // Alerts.SuccessNormal(\"As per your request, OTP has been sent to your registered email address.\")\n          setUid(response.data[\"user id\"])\n        } else if (response.data.code === 0) {\n          setLoading(false)\n          Alerts.ErrorNormal(\"Invalid email or password.\")\n        }\n      })\n      .catch((error) => {\n        console.log(\"erroror - \", error);\n      });\n  };\n\n  const handleChange = (e) => {\n    console.log(\"val-\", e.target.value);\n    setEmail(e.target.value);\n  };\n\n  return (\n    <>\n      <Header mtp=\"mtp\" />\n      <div class=\"container\">\n\n        {\n          show ? <div>\n            <VerifyOtpLogin email={email} uid={uid}\n              loading={loading}\n              setLoading={setLoading} />\n          </div>\n            :\n            <div class=\"form\">\n              <div class=\"heading\">\n                <h2>TAX PROFESSIONAL LOGIN</h2>\n              </div>\n              <form onSubmit={handleSubmit(onSubmit)}>\n                <div className=\"row\">\n                  <div className=\"col-md-12\">\n                    <div className=\"mb-3\">\n                      <label className=\"form-label\">Email<span className=\"declined\">*</span></label>\n                      <input\n                        type=\"text\"\n                        className={classNames(\"form-control\", {\n                          \"is-invalid\": errors.p_email,\n                        })}\n                        name=\"p_email\"\n                        ref={register}\n                        placeholder=\"Enter Email\"\n                        autocomplete=\"off\"\n                        onChange={(e) => handleChange(e)}\n                      />\n                      {errors.p_email && (\n                        <div className=\"invalid-feedback\">\n                          {errors.p_email.message}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"col-md-12\">\n                    <div className=\"mb-3\">\n                      <label className=\"form-label\">Password<span className=\"declined\">*</span></label>\n                      <input\n                        type={isPasswordShow ? \"text\" : \"password\"}\n                        className={classNames(\"form-control\", {\n                          \"is-invalid\": errors.password,\n                        })}\n                        name=\"password\"\n                        placeholder=\"Enter Password\"\n                        ref={register}\n                      />\n                      <i\n                        className={`fa ${isPasswordShow ? \"fa-eye-slash\" : \"fa-eye\"} password-icon`}\n                        onClick={togglePasssword}\n                      />\n                      {errors.password && (\n                        <div className=\"invalid-feedback\">\n                          {errors.password.message}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n\n                {\n                  loading ?\n                    <div class=\"col-md-12\">\n                      <Spinner color=\"primary\" />\n                    </div>\n                    :\n                    <button type=\"submit\" className=\"btn btn-primary\">\n                      Submit\n                    </button>\n                }\n\n                <div style={{ display: \"flex\", flexDirection: \"row-reverse\" }}>\n                  <Link\n                    to={{\n                      pathname: \"/taxprofessional/forget-password\",\n                      email: `${email}`,\n                    }}\n                  >\n                    Forgot Password\n                  </Link>\n                </div>\n\n                <Mandatory />\n              </form>\n            </div>\n        }\n\n\n      </div>\n      <Footer />\n    </>\n  );\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}